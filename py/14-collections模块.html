<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>collections模块 | nanarino note</title>
    <meta name="description" content="a note I took with markdown">
    
    
    <link rel="preload" href="/markdown-note/assets/css/0.styles.447f505d.css" as="style"><link rel="preload" href="/markdown-note/assets/js/app.a5a2e409.js" as="script"><link rel="preload" href="/markdown-note/assets/js/21.4903e46e.js" as="script"><link rel="prefetch" href="/markdown-note/assets/js/10.5297ff5c.js"><link rel="prefetch" href="/markdown-note/assets/js/11.e616fed6.js"><link rel="prefetch" href="/markdown-note/assets/js/12.c7e85455.js"><link rel="prefetch" href="/markdown-note/assets/js/13.e0a9e0eb.js"><link rel="prefetch" href="/markdown-note/assets/js/14.42aac0ab.js"><link rel="prefetch" href="/markdown-note/assets/js/15.67d8ca9c.js"><link rel="prefetch" href="/markdown-note/assets/js/16.f12edd35.js"><link rel="prefetch" href="/markdown-note/assets/js/17.366ac3e4.js"><link rel="prefetch" href="/markdown-note/assets/js/18.9f4f0137.js"><link rel="prefetch" href="/markdown-note/assets/js/19.6d0cdd28.js"><link rel="prefetch" href="/markdown-note/assets/js/2.11da7a94.js"><link rel="prefetch" href="/markdown-note/assets/js/20.398390a2.js"><link rel="prefetch" href="/markdown-note/assets/js/22.0814d3c5.js"><link rel="prefetch" href="/markdown-note/assets/js/23.0186b3c2.js"><link rel="prefetch" href="/markdown-note/assets/js/24.f4574841.js"><link rel="prefetch" href="/markdown-note/assets/js/25.5c607f75.js"><link rel="prefetch" href="/markdown-note/assets/js/26.e1569c79.js"><link rel="prefetch" href="/markdown-note/assets/js/27.fde49d22.js"><link rel="prefetch" href="/markdown-note/assets/js/28.b79e68b9.js"><link rel="prefetch" href="/markdown-note/assets/js/29.16b98140.js"><link rel="prefetch" href="/markdown-note/assets/js/3.249571e8.js"><link rel="prefetch" href="/markdown-note/assets/js/30.80d078ec.js"><link rel="prefetch" href="/markdown-note/assets/js/31.4a60483c.js"><link rel="prefetch" href="/markdown-note/assets/js/32.3e3ada2c.js"><link rel="prefetch" href="/markdown-note/assets/js/33.f6609dbd.js"><link rel="prefetch" href="/markdown-note/assets/js/34.5d3384ff.js"><link rel="prefetch" href="/markdown-note/assets/js/35.c6365275.js"><link rel="prefetch" href="/markdown-note/assets/js/36.180cb4ea.js"><link rel="prefetch" href="/markdown-note/assets/js/37.c92d05bb.js"><link rel="prefetch" href="/markdown-note/assets/js/38.a4031940.js"><link rel="prefetch" href="/markdown-note/assets/js/39.e992116b.js"><link rel="prefetch" href="/markdown-note/assets/js/4.616dbac7.js"><link rel="prefetch" href="/markdown-note/assets/js/40.527cbfac.js"><link rel="prefetch" href="/markdown-note/assets/js/5.8faa297c.js"><link rel="prefetch" href="/markdown-note/assets/js/6.3fa7f94b.js"><link rel="prefetch" href="/markdown-note/assets/js/7.9218be4d.js"><link rel="prefetch" href="/markdown-note/assets/js/8.3269e16e.js"><link rel="prefetch" href="/markdown-note/assets/js/9.b5782f05.js">
    <link rel="stylesheet" href="/markdown-note/assets/css/0.styles.447f505d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown-note/" class="home-link router-link-active"><!----> <span class="site-name">nanarino note</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino/markdown-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.akokono.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysite
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino/markdown-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.akokono.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysite
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>起步</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>数据类型</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>常用模块</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/markdown-note/py/13-正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/markdown-note/py/14-collections模块.html" class="active sidebar-link">collections模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown-note/py/14-collections模块.html#queue模块" class="sidebar-link">Queue模块</a></li></ul></li><li><a href="/markdown-note/py/15-时间有关模块.html" class="sidebar-link">时间有关模块</a></li><li><a href="/markdown-note/py/16-random模块.html" class="sidebar-link">random模块</a></li><li><a href="/markdown-note/py/17-os模块和sys模块.html" class="sidebar-link">os模块和sys模块</a></li><li><a href="/markdown-note/py/18-序列化有关模块.html" class="sidebar-link">序列化有关模块</a></li><li><a href="/markdown-note/py/19-模块和包.html" class="sidebar-link">模块和包</a></li><li><a href="/markdown-note/py/20-异常抛出和捕获.html" class="sidebar-link">异常的抛出和捕获</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>面向对象</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>网络编程</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="collections模块"><a href="#collections模块" aria-hidden="true" class="header-anchor">#</a> collections模块</h1> <p>在内置数据类型（dict、list、set、tuple）的基础上，collections模块还提供了几个额外的数据类型：</p> <p>Counter、deque、defaultdict、namedtuple和OrderedDict等。</p> <blockquote><p>1.namedtuple: 生成可以使用名字来访问元素内容的tuple</p> <p>2.deque: 双端队列，可以快速的从另外一侧追加和推出对象</p> <p>3.Counter: 计数器，主要用来计数</p> <p>4.OrderedDict: 有序字典</p> <p>5.defaultdict: 带有默认值的字典</p></blockquote> <h3 id="namedtuple"><a href="#namedtuple" aria-hidden="true" class="header-anchor">#</a> namedtuple</h3> <p>我们知道<code>tuple</code>可以表示不变集合，例如，一个点的二维坐标就可以表示成：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>但是，看到(1, 2)，很难看出这个tuple是用来表示一个坐标的。</p> <p>这时，<code>namedtuple</code>就派上了用场：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Point <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Point'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p <span class="token operator">=</span> Point<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>x
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>y
<span class="token number">2</span>
</code></pre></div><p>类似的，如果要用坐标和半径表示一个圆，也可以用<code>namedtuple</code>定义：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#namedtuple('名称', [属性list]):</span>
Circle <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Circle'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="deque"><a href="#deque" aria-hidden="true" class="header-anchor">#</a> deque</h3> <p>使用list存储数据时，按索引访问元素很快，但是插入和删除元素就很慢了，因为list是线性存储，数据量大的时候，插入和删除效率很低。</p> <p>deque是为了高效实现插入和删除操作的双向列表，适合用于队列和栈：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> deque
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q
deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>deque除了实现list的<code>append()</code>和<code>pop()</code>外，还支持<code>appendleft()</code>和<code>popleft()</code>，这样就可以非常高效地往头部添加或删除元素。</p> <h3 id="ordereddict"><a href="#ordereddict" aria-hidden="true" class="header-anchor">#</a> OrderedDict</h3> <p>使用dict时，Key是无序的。在对dict做迭代时，我们无法确定Key的顺序。</p> <p>如果要保持Key的顺序，可以用<code>OrderedDict</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> OrderedDict
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token comment"># dict的Key是无序的</span>
<span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od <span class="token comment"># OrderedDict的Key是有序的</span>
OrderedDict<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>注意，<code>OrderedDict</code>的Key会按照插入的顺序排列，不是Key本身排序：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 按照插入的Key的顺序返回</span>
<span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="defaultdict"><a href="#defaultdict" aria-hidden="true" class="header-anchor">#</a> defaultdict</h3> <div class="language- extra-class"><pre class="language-text"><code>有如下值集合 [11,22,33,44,55,66,77,88,99,90...]，将所有大于66的值保存至字典的第一个key中，将小于66的值保存至第二个key的值中。

即： {'k1': 大于66, 'k2': 小于66}
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">]</span>

my_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">for</span> value <span class="token keyword">in</span>  values<span class="token punctuation">:</span>
    <span class="token keyword">if</span> value<span class="token operator">&gt;</span><span class="token number">66</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> my_dict<span class="token punctuation">.</span>has_key<span class="token punctuation">(</span><span class="token string">'k1'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            my_dict<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            my_dict<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> my_dict<span class="token punctuation">.</span>has_key<span class="token punctuation">(</span><span class="token string">'k2'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            my_dict<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            my_dict<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict

values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">]</span>

my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> value <span class="token keyword">in</span>  values<span class="token punctuation">:</span>
    <span class="token keyword">if</span> value<span class="token operator">&gt;</span><span class="token number">66</span><span class="token punctuation">:</span>
        my_dict<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        my_dict<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
</code></pre></div><p>使用<code>dict</code>时，如果引用的Key不存在，就会抛出<code>KeyError</code>。如果希望key不存在时，返回一个默认值，就可以用<code>defaultdict</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> <span class="token string">'N/A'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'abc'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span> <span class="token comment"># key1存在</span>
<span class="token string">'abc'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd<span class="token punctuation">[</span><span class="token string">'key2'</span><span class="token punctuation">]</span> <span class="token comment"># key2不存在，返回默认值</span>
<span class="token string">'N/A'</span>
</code></pre></div><h3 id="counter"><a href="#counter" aria-hidden="true" class="header-anchor">#</a> Counter</h3> <p>Counter类的目的是用来跟踪值出现的次数。它是一个无序的容器类型，以字典的键值对形式存储，其中元素作为key，其计数作为value。计数值可以是任意的Interger（包括0和负数）。Counter类和其他语言的bags或multisets很相似。</p> <div class="language-python extra-class"><pre class="language-python"><code>c <span class="token operator">=</span> Counter<span class="token punctuation">(</span><span class="token string">'abcdeabcdabcaba'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> c
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Counter<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Counter的其他方法这里不是重点。</p> <h2 id="queue模块"><a href="#queue模块" aria-hidden="true" class="header-anchor">#</a> Queue模块</h2> <p>创建一个“队列”对象</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> Queue
myqueue <span class="token operator">=</span> Queue<span class="token punctuation">.</span>Queue<span class="token punctuation">(</span>maxsize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>Queue.Queue类即是一个队列的同步实现。队列长度可为无限或者有限。可通过Queue的构造函数的可选参数maxsize来设定队列长度。如果maxsize小于1就表示队列长度无限。</p> <p>将一个值放入队列中</p> <div class="language-python extra-class"><pre class="language-python"><code>myqueue<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>调用队列对象的put()方法在队尾插入一个项目。put()有两个参数，第一个item为必需的，为插入项目的值；第二个block为可选参数，默认为1。如果队列当前为空且block为1，put()方法就使调用线程暂停,直到空出一个数据单元。如果block为0，put方法将引发Full异常。</p> <p>将一个值从队列中取出</p> <div class="language-python extra-class"><pre class="language-python"><code>myqueue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>调用队列对象的get()方法从队头删除并返回一个项目。可选参数为block，默认为True。如果队列为空且block为True，get()就使调用线程暂停，直至有项目可用。如果队列为空且block为False，队列将引发Empty异常。</p> <p>python queue模块有三种队列:</p> <blockquote><p>1、python queue模块的FIFO队列先进先出。</p> <p>2、LIFO类似于堆。即先进后出。</p> <p>3、还有一种是优先级队列级别越低越先出来。</p></blockquote> <p>针对这三种队列分别有三个构造函数:</p> <blockquote><p>1、class Queue.Queue(maxsize) FIFO</p> <p>2、class Queue.LifoQueue(maxsize) LIFO</p> <p>3、class Queue.PriorityQueue(maxsize) 优先级队列</p></blockquote> <p>介绍一下此包中的常用方法:</p> <div class="language-python extra-class"><pre class="language-python"><code>Queue<span class="token punctuation">.</span>qsize<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#返回队列的大小 </span>
Queue<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#如果队列为空，返回True,反之False </span>
Queue<span class="token punctuation">.</span>full<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#如果队列满了，返回True,反之False</span>
Queue<span class="token punctuation">.</span>full <span class="token comment">#与 maxsize 大小对应 </span>
Queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">[</span>block<span class="token punctuation">[</span><span class="token punctuation">,</span> timeout<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#获取队列，timeout等待时间 </span>
Queue<span class="token punctuation">.</span>get_nowait<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#相当Queue.get(False)</span>
非阻塞 Queue<span class="token punctuation">.</span>put<span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token comment">#写入队列，timeout等待时间 </span>
Queue<span class="token punctuation">.</span>put_nowait<span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token comment">#相当Queue.put(item, False)</span>
Queue<span class="token punctuation">.</span>task_done<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#在完成一项工作之后，Queue.task_done()函数向任务已经完成的队列发送一个信号</span>
Queue<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#实际上意味着等到队列为空，再执行别的操作</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/markdown-note/assets/js/app.a5a2e409.js" defer></script><script src="/markdown-note/assets/js/21.4903e46e.js" defer></script>
  </body>
</html>
