<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>异常的抛出和捕获 | nanarino note</title>
    <meta name="description" content="a note I took with markdown">
    
    
    <link rel="preload" href="/markdown-note/assets/css/0.styles.447f505d.css" as="style"><link rel="preload" href="/markdown-note/assets/js/app.fdab574b.js" as="script"><link rel="preload" href="/markdown-note/assets/js/47.81668c7e.js" as="script"><link rel="prefetch" href="/markdown-note/assets/js/10.c36c8c99.js"><link rel="prefetch" href="/markdown-note/assets/js/11.3ca32aa8.js"><link rel="prefetch" href="/markdown-note/assets/js/12.431aa9de.js"><link rel="prefetch" href="/markdown-note/assets/js/13.3a3307fa.js"><link rel="prefetch" href="/markdown-note/assets/js/14.26e3e81e.js"><link rel="prefetch" href="/markdown-note/assets/js/15.23bf0b11.js"><link rel="prefetch" href="/markdown-note/assets/js/16.0a3923a4.js"><link rel="prefetch" href="/markdown-note/assets/js/17.7f4a17ab.js"><link rel="prefetch" href="/markdown-note/assets/js/18.519ebe17.js"><link rel="prefetch" href="/markdown-note/assets/js/19.71fee398.js"><link rel="prefetch" href="/markdown-note/assets/js/2.2789741e.js"><link rel="prefetch" href="/markdown-note/assets/js/20.594efd53.js"><link rel="prefetch" href="/markdown-note/assets/js/21.502a6ee3.js"><link rel="prefetch" href="/markdown-note/assets/js/22.20ef2aa3.js"><link rel="prefetch" href="/markdown-note/assets/js/23.d211eb36.js"><link rel="prefetch" href="/markdown-note/assets/js/24.84b7faf2.js"><link rel="prefetch" href="/markdown-note/assets/js/25.703f8284.js"><link rel="prefetch" href="/markdown-note/assets/js/26.4be501d5.js"><link rel="prefetch" href="/markdown-note/assets/js/27.b1a35819.js"><link rel="prefetch" href="/markdown-note/assets/js/28.4158d6ab.js"><link rel="prefetch" href="/markdown-note/assets/js/29.526d0b0e.js"><link rel="prefetch" href="/markdown-note/assets/js/3.dcb0755e.js"><link rel="prefetch" href="/markdown-note/assets/js/30.4e5c0e62.js"><link rel="prefetch" href="/markdown-note/assets/js/31.fca647f8.js"><link rel="prefetch" href="/markdown-note/assets/js/32.ba6e2f1c.js"><link rel="prefetch" href="/markdown-note/assets/js/33.4f58275c.js"><link rel="prefetch" href="/markdown-note/assets/js/34.672326bf.js"><link rel="prefetch" href="/markdown-note/assets/js/35.66d3e1f1.js"><link rel="prefetch" href="/markdown-note/assets/js/36.f29b9098.js"><link rel="prefetch" href="/markdown-note/assets/js/37.f6560079.js"><link rel="prefetch" href="/markdown-note/assets/js/38.9b6814a4.js"><link rel="prefetch" href="/markdown-note/assets/js/39.1df0c5a4.js"><link rel="prefetch" href="/markdown-note/assets/js/4.09533aa5.js"><link rel="prefetch" href="/markdown-note/assets/js/40.31824979.js"><link rel="prefetch" href="/markdown-note/assets/js/41.8e04bc8d.js"><link rel="prefetch" href="/markdown-note/assets/js/42.4b04cdd0.js"><link rel="prefetch" href="/markdown-note/assets/js/43.225c8dca.js"><link rel="prefetch" href="/markdown-note/assets/js/44.c22e6464.js"><link rel="prefetch" href="/markdown-note/assets/js/45.73d25276.js"><link rel="prefetch" href="/markdown-note/assets/js/46.e540f4a1.js"><link rel="prefetch" href="/markdown-note/assets/js/48.dde28177.js"><link rel="prefetch" href="/markdown-note/assets/js/49.d1743fa7.js"><link rel="prefetch" href="/markdown-note/assets/js/5.561a8061.js"><link rel="prefetch" href="/markdown-note/assets/js/50.2dd70af8.js"><link rel="prefetch" href="/markdown-note/assets/js/51.d0b49bc5.js"><link rel="prefetch" href="/markdown-note/assets/js/52.a1767f9a.js"><link rel="prefetch" href="/markdown-note/assets/js/53.d2fe04ba.js"><link rel="prefetch" href="/markdown-note/assets/js/54.5b7d8206.js"><link rel="prefetch" href="/markdown-note/assets/js/55.2151c6bc.js"><link rel="prefetch" href="/markdown-note/assets/js/56.33defd83.js"><link rel="prefetch" href="/markdown-note/assets/js/57.c620ea9d.js"><link rel="prefetch" href="/markdown-note/assets/js/58.6d52ed55.js"><link rel="prefetch" href="/markdown-note/assets/js/59.d38e2a81.js"><link rel="prefetch" href="/markdown-note/assets/js/6.2ffce86f.js"><link rel="prefetch" href="/markdown-note/assets/js/60.18a119b0.js"><link rel="prefetch" href="/markdown-note/assets/js/61.1af48434.js"><link rel="prefetch" href="/markdown-note/assets/js/62.0c01b951.js"><link rel="prefetch" href="/markdown-note/assets/js/63.b0eed8fb.js"><link rel="prefetch" href="/markdown-note/assets/js/7.6d1f0fd6.js"><link rel="prefetch" href="/markdown-note/assets/js/8.2d84ec2c.js"><link rel="prefetch" href="/markdown-note/assets/js/9.9f38b659.js">
    <link rel="stylesheet" href="/markdown-note/assets/css/0.styles.447f505d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown-note/" class="home-link router-link-active"><!----> <span class="site-name">nanarino note</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino/markdown-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.akokono.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysite
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino/markdown-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.akokono.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysite
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>起步</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>数据类型</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>常用模块</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/markdown-note/py/13-正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/markdown-note/py/14-collections模块.html" class="sidebar-link">collections模块</a></li><li><a href="/markdown-note/py/15-时间有关模块.html" class="sidebar-link">时间有关模块</a></li><li><a href="/markdown-note/py/16-random模块.html" class="sidebar-link">random模块</a></li><li><a href="/markdown-note/py/17-os模块和sys模块.html" class="sidebar-link">os模块和sys模块</a></li><li><a href="/markdown-note/py/18-序列化有关模块.html" class="sidebar-link">序列化有关模块</a></li><li><a href="/markdown-note/py/19-模块和包.html" class="sidebar-link">模块和包</a></li><li><a href="/markdown-note/py/20-异常抛出和捕获.html" class="active sidebar-link">异常的抛出和捕获</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown-note/py/20-异常抛出和捕获.html#抛出异常和自定义异常" class="sidebar-link">抛出异常和自定义异常</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/20-异常抛出和捕获.html#捕获异常" class="sidebar-link">捕获异常</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>面向对象</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>网络编程</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>GUI编程</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>WEB框架</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="异常的抛出和捕获"><a href="#异常的抛出和捕获" aria-hidden="true" class="header-anchor">#</a> 异常的抛出和捕获</h1> <h2 id="抛出异常和自定义异常"><a href="#抛出异常和自定义异常" aria-hidden="true" class="header-anchor">#</a> 抛出异常和自定义异常</h2> <h4 id="raise-语句"><a href="#raise-语句" aria-hidden="true" class="header-anchor">#</a> raise 语句</h4> <p>Python中的raise 关键字用于引发一个异常，基本上和C#和Java中的throw关键字相同，如下所示：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">ThorwErr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">&quot;抛出一个异常&quot;</span><span class="token punctuation">)</span> 
<span class="token comment"># Exception: 抛出一个异常 </span>
ThorwErr<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>raise关键字后面是抛出是一个通用的异常类型(Exception)，一般来说抛出的异常越详细越好，Python在exceptions模块内建了很多的异常类型，通过使用dir函数来查看exceptions中的异常类型，如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> exceptions
 
<span class="token comment"># ['ArithmeticError', 'AssertionError'.....]</span>
<span class="token keyword">print</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>exceptions<span class="token punctuation">)</span>
</code></pre></div><p>捕捉到了异常，但是又想重新引发它(传递异常)，可以使用不带参数的raise语句即可：</p> <div class="language-python extra-class"><pre class="language-python"><code> <span class="token keyword">class</span> <span class="token class-name">MuffledCalculator</span><span class="token punctuation">:</span>
     muffled <span class="token operator">=</span> <span class="token boolean">False</span>
     <span class="token keyword">def</span> <span class="token function">calc</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>expr<span class="token punctuation">)</span><span class="token punctuation">:</span>
         <span class="token keyword">try</span><span class="token punctuation">:</span>
             <span class="token keyword">return</span> <span class="token builtin">eval</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span>
         <span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
             <span class="token keyword">if</span> self<span class="token punctuation">.</span>muffled<span class="token punctuation">:</span>
                 <span class="token keyword">print</span> <span class="token string">'Division by zero is illegal'</span>
             <span class="token keyword">else</span><span class="token punctuation">:</span>
                 <span class="token keyword">raise</span>
</code></pre></div><p>Python中也可以自定义自己的特殊类型的异常，只需要要从Exception类继承(直接或间接)即可</p> <h2 id="捕获异常"><a href="#捕获异常" aria-hidden="true" class="header-anchor">#</a> 捕获异常</h2> <p>和C#中的try/catch类似，Python中使用try/except关键字来捕捉异常，如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token number">2</span><span class="token operator">/</span><span class="token number">0</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'除数不能为0'</span>
</code></pre></div><p>在一个except语句只捕捉其后声明的异常类型，如果可能会抛出的是其他类型的异常就需要再增加一个except语句了，或者也可以指定一个更通用的异常类型比如：Exception，(也可以不接任何异常和参数直接捕获,但是pycharm会给出一个警告的哦) 如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token number">2</span><span class="token operator">/</span><span class="token string">'0'</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'除数不能为0'</span>
<span class="token keyword">except</span> Exception<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'其他类型异常'</span>
</code></pre></div><p>每个异常都会有一些异常信息，一般情况下我们应该把这些异常信息记录下来：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token number">2</span><span class="token operator">/</span><span class="token string">'0'</span>
<span class="token keyword">except</span> <span class="token punctuation">(</span>ZeroDivisionError<span class="token punctuation">,</span>Exception<span class="token punctuation">)</span> <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token comment"># unsupported operand type(s) for /: 'int' and 'str'</span>
    <span class="token keyword">print</span> e 
</code></pre></div><p>finally子句和try子句联合使用但是和except语句不同，finally不管try子句内部是否有异常发生，都会执行finally子句内的代码。所有一般情况下，finally自己常常用于关闭文件或者在Socket中。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token number">2</span><span class="token operator">/</span><span class="token string">'0'</span>
<span class="token keyword">except</span> <span class="token punctuation">(</span>ZeroDivisionError<span class="token punctuation">,</span>Exception<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'发生了一个异常'</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'正常得出了计算结果'</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'不管是否发生异常都执行'</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/markdown-note/assets/js/app.fdab574b.js" defer></script><script src="/markdown-note/assets/js/47.81668c7e.js" defer></script>
  </body>
</html>
