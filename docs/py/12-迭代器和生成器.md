# 迭代器和生成器

#### 递归和迭代

#### 迭代器协议

​    对象必须提供next方法

​    `next()`要么返回下一项要么引起`StopIteration`异常以终止迭代

#### 可迭代对象

​    实现了迭代器协议的对象,内部定义了`__iter__`方法

​    python的内部工具(for,sum函数等)使用迭代器协议访问对象

#### for循环机制

​    for循环做的事情:

​        需要遍历的对象(广义的可迭代对象)

​        `.__iter__()`转化为Iterator(可迭代对象)

​        此Iterator`.__next__()`访问下一个

​        捕获StopIteration异常

​    它既可以遍历有序列类型 也可遍历无序列类型

#### 内置方法next()

​    `next(Obj)` 相当于 `Obj.__next__()`

```python
>>> a="1234"
>>> b=a.__iter__()
>>> next(b)
'1'
>>> next(b)
'2'
>>> next(b)
'3'
>>> next(b)
'4'

>>> b
<str_iterator object at 0x0000000002AD6438>
```

#### 生成器

​    自己实现了迭代器协议

​    不需要调用`__iter__`方法

   **生成器就是可迭代对象**

#### 生成器函数:

使用`yield`而不是return 多个

生成器函数执行返回一个可迭代对象

可迭代对象每次next返回一个,保存了函数的状态

```python
def a():
    yield 3
    yield 4
    yield 5

>>> b=a()
>>> next(b)
3
>>> next(b)
4
>>> next(b)
5

>>> b
<generator object a at 0x0000000002B002A0>
```

#### 生成器表达式:

​    类似上一节讲过的列表解析 但是不是使用中括号,而是使用圆括号

#### send()方法

​    其参数代替上一轮的yield语句完成下一轮next