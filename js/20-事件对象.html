<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事件对象 | nanarino note</title>
    <meta name="description" content="a note I took with markdown">
    
    
    <link rel="preload" href="/markdown-note/assets/css/0.styles.447f505d.css" as="style"><link rel="preload" href="/markdown-note/assets/js/app.10f2f5d4.js" as="script"><link rel="preload" href="/markdown-note/assets/js/22.20ef2aa3.js" as="script"><link rel="prefetch" href="/markdown-note/assets/js/10.c36c8c99.js"><link rel="prefetch" href="/markdown-note/assets/js/11.3ca32aa8.js"><link rel="prefetch" href="/markdown-note/assets/js/12.431aa9de.js"><link rel="prefetch" href="/markdown-note/assets/js/13.3a3307fa.js"><link rel="prefetch" href="/markdown-note/assets/js/14.26e3e81e.js"><link rel="prefetch" href="/markdown-note/assets/js/15.23bf0b11.js"><link rel="prefetch" href="/markdown-note/assets/js/16.0a3923a4.js"><link rel="prefetch" href="/markdown-note/assets/js/17.7f4a17ab.js"><link rel="prefetch" href="/markdown-note/assets/js/18.519ebe17.js"><link rel="prefetch" href="/markdown-note/assets/js/19.71fee398.js"><link rel="prefetch" href="/markdown-note/assets/js/2.11da7a94.js"><link rel="prefetch" href="/markdown-note/assets/js/20.594efd53.js"><link rel="prefetch" href="/markdown-note/assets/js/21.4ec3995d.js"><link rel="prefetch" href="/markdown-note/assets/js/23.d211eb36.js"><link rel="prefetch" href="/markdown-note/assets/js/24.a894106c.js"><link rel="prefetch" href="/markdown-note/assets/js/25.054a8bac.js"><link rel="prefetch" href="/markdown-note/assets/js/26.225f818f.js"><link rel="prefetch" href="/markdown-note/assets/js/27.12c563b2.js"><link rel="prefetch" href="/markdown-note/assets/js/28.761b92cd.js"><link rel="prefetch" href="/markdown-note/assets/js/29.4734fd13.js"><link rel="prefetch" href="/markdown-note/assets/js/3.23b2bd9c.js"><link rel="prefetch" href="/markdown-note/assets/js/30.b507109c.js"><link rel="prefetch" href="/markdown-note/assets/js/31.4ee9ca42.js"><link rel="prefetch" href="/markdown-note/assets/js/32.5aba6820.js"><link rel="prefetch" href="/markdown-note/assets/js/33.bd433285.js"><link rel="prefetch" href="/markdown-note/assets/js/34.7d784b83.js"><link rel="prefetch" href="/markdown-note/assets/js/35.c0c148e7.js"><link rel="prefetch" href="/markdown-note/assets/js/36.7a0cb274.js"><link rel="prefetch" href="/markdown-note/assets/js/37.fa24b958.js"><link rel="prefetch" href="/markdown-note/assets/js/38.982f2380.js"><link rel="prefetch" href="/markdown-note/assets/js/39.2556b6d1.js"><link rel="prefetch" href="/markdown-note/assets/js/4.d1d93ed5.js"><link rel="prefetch" href="/markdown-note/assets/js/40.561f060d.js"><link rel="prefetch" href="/markdown-note/assets/js/41.4f00cbad.js"><link rel="prefetch" href="/markdown-note/assets/js/42.99a58740.js"><link rel="prefetch" href="/markdown-note/assets/js/43.7e1c3c1c.js"><link rel="prefetch" href="/markdown-note/assets/js/44.fe60b089.js"><link rel="prefetch" href="/markdown-note/assets/js/45.aef69035.js"><link rel="prefetch" href="/markdown-note/assets/js/46.bb9bb7ed.js"><link rel="prefetch" href="/markdown-note/assets/js/47.6bccc360.js"><link rel="prefetch" href="/markdown-note/assets/js/48.a19e74d7.js"><link rel="prefetch" href="/markdown-note/assets/js/49.d476107f.js"><link rel="prefetch" href="/markdown-note/assets/js/5.8faa297c.js"><link rel="prefetch" href="/markdown-note/assets/js/50.129e4399.js"><link rel="prefetch" href="/markdown-note/assets/js/51.5b9dbf37.js"><link rel="prefetch" href="/markdown-note/assets/js/52.e446cd88.js"><link rel="prefetch" href="/markdown-note/assets/js/53.8f1dc5c5.js"><link rel="prefetch" href="/markdown-note/assets/js/54.bf79f3a6.js"><link rel="prefetch" href="/markdown-note/assets/js/55.080d6c5e.js"><link rel="prefetch" href="/markdown-note/assets/js/56.779c6469.js"><link rel="prefetch" href="/markdown-note/assets/js/57.f9b95ed0.js"><link rel="prefetch" href="/markdown-note/assets/js/58.0f65d9c9.js"><link rel="prefetch" href="/markdown-note/assets/js/59.518e554a.js"><link rel="prefetch" href="/markdown-note/assets/js/6.3fa7f94b.js"><link rel="prefetch" href="/markdown-note/assets/js/60.42e4659c.js"><link rel="prefetch" href="/markdown-note/assets/js/61.f614798e.js"><link rel="prefetch" href="/markdown-note/assets/js/7.9218be4d.js"><link rel="prefetch" href="/markdown-note/assets/js/8.3269e16e.js"><link rel="prefetch" href="/markdown-note/assets/js/9.9f38b659.js">
    <link rel="stylesheet" href="/markdown-note/assets/css/0.styles.447f505d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown-note/" class="home-link router-link-active"><!----> <span class="site-name">nanarino note</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino/markdown-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.akokono.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysite
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino/markdown-note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.akokono.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysite
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>起步</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>函数和作用域</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>数据类型和对象</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>BOM和DOM对象</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/markdown-note/js/18-DOM方法.html" class="sidebar-link">DOM方法</a></li><li><a href="/markdown-note/js/19-事件的实现.html" class="sidebar-link">事件的实现</a></li><li><a href="/markdown-note/js/20-事件对象.html" class="active sidebar-link">事件对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown-note/js/20-事件对象.html#冒泡和捕获" class="sidebar-link">冒泡和捕获</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/20-事件对象.html#默认行为" class="sidebar-link">默认行为</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/20-事件对象.html#事件对象-2" class="sidebar-link">事件对象</a></li></ul></li><li><a href="/markdown-note/js/21-BOM相关.html" class="sidebar-link">BOM相关</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>补充知识点</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="事件对象"><a href="#事件对象" aria-hidden="true" class="header-anchor">#</a> 事件对象</h1> <h2 id="冒泡和捕获"><a href="#冒泡和捕获" aria-hidden="true" class="header-anchor">#</a> 冒泡和捕获</h2> <p>当我们触发一个事件的时候。浏览器在做什么？</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>list<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">let</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.list&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.list li&quot;</span><span class="token punctuation">)</span>
    li<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;li触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    list<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;list触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如上代码在点击li的时候，不管绑定事件监听的添加先后顺序，事件的触发都是有先后顺序的。</p> <p>这里的触发顺序是啥？ <strong>默认是由里到外</strong>。</p> <p>在JavaScript中，事件产生之后必须要遵循一定的规律和顺序进行触发，并且要保证规律的一致性：所以就有了事件触发的模型。</p> <p>将页面中的元素看成是一个有一个嵌套的盒子的话（也就是盒子模型），那么由很多元素会在某一些盒子<strong>里面</strong>，有的又在<strong>外面</strong>，并且所有的元素一层一层嵌套直到body，html（虽然你可能不写，但是浏览器会补全。。）我们将被嵌套的元素理解成，<strong>一个池子</strong>。越外层的元素越在上层。嵌套在越里面的元素越在下层。最外层是window</p> <p>所以：当一个事件发生的时候。比如我点击这个元素的时候在做什么呢？</p> <ol><li><p><s>首先电脑捕获点击事件，发现是点击的是浏览器里面的东西</s>（逃）然后将点击事件告知浏览器window</p> <pre><code> 2. 浏览器window接受到点击事件，他会判断点击的是浏览器的工具按钮还是document中。
 3. document点击，是否在html中
 4. 是不是在html里面的body中
 5. 。。。
 6. 点击到父级元素并点击到目标元素
</code></pre></li></ol> <p>以上是第一部分。像是一张在<strong>池子</strong>里面渐渐收缩的大网，我们管他叫<strong>事件捕获（capturing）</strong>，现在还没完。浏览器会从目标元素出发，进行第二轮事件触发</p> <ol><li>目标元素被点击，事件触发。通知父级元素</li> <li>父级元素触发点击，通知到父级的父级</li> <li>。。。</li> <li>到body</li> <li>到html</li> <li>到document</li> <li>浏览器window接受到触发事件</li></ol> <p>这是第二部分： 像是<strong>池子</strong>被捕获的小鱼吐出的<strong>泡泡</strong>，慢慢浮出水面，我们管他叫<strong>事件冒泡（bubbling）</strong>。至此，一次点击事件大功告成。</p> <p>这是就是我们浏览器的<strong>事件模型</strong>。</p> <p>那么和我们点击事件的触发顺序有什么关系呢？</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.a&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.b&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.c&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// attachEvent addEventListener</span>
	a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	b<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;c被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里的触发顺序是 c =&gt; b =&gt; a的打印顺序。所以这里的触发顺序是由内到外。和事件冒泡的顺序一致。</p> <p><strong>在JavaScript中子元素触发事件，整体事件触发的顺序是从内到外的，也就是在事件冒泡阶段触发</strong></p> <p>在点击事件的时候，捕获阶段，定位到具体元素，然后从元素开始，挨个触发元素的点击事件，如果有点击事件，处理回调函数，如果没有，跳。所以就是从里到外触发。但是如果我们要修改事件触发的顺序。可以让某些元素的回调函数提早触发，但不是所有情况都适用。</p> <p><strong>addEventListener</strong> 一共可以接受三个参数： 第一个是事件类型，第二个是事件回调函数，第三个是事件在什么阶段触发。</p> <p>​	false: 在捕获阶段不触发。在不添加第三个参数的时候默认是false</p> <p>​	true:  在捕获阶段触发。</p> <div class="language-js extra-class"><pre class="language-js"><code>a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;c被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>此时打印顺序： a =&gt; c =&gt; b</p> <div class="language-js extra-class"><pre class="language-js"><code>a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;c被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>此时打印顺序： b =&gt; c =&gt; a</p> <p>这就是我们的事件触发顺序！</p> <p>特殊得：</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;document&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>document =&gt; window 可知 document在window下一层级</p> <p>注意： 这是浏览器的事件触发机制，并不能让你达到任意的触发顺序，也没有意义。</p> <h2 id="默认行为"><a href="#默认行为" aria-hidden="true" class="header-anchor">#</a> 默认行为</h2> <p>默认行为： 指的是浏览器的默认行为。</p> <p>当前页面中什么都没写的时候，点击某些标签或者右键或者滚动的时候，都会触发相应的事件，都会出现相应的效果。这就是浏览器的默认行为。</p> <p>有时候我们需要阻止默认行为，使用e.preventDefault()，这句不兼容，IE8以下的浏览器会不生效。在IE678的浏览器阻止默认行为的方法：e.returnValue = false</p> <p>比如：</p> <ul><li>阻止右键菜单事件：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">// 打开右键菜单的行为</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;右键点击触发&quot;</span><span class="token punctuation">)</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 这句阻止了打开右键菜单的行为。</span>
    <span class="token comment">// e.returnValue = false //IE678的浏览器的操作</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当我们使用DOM0级事件的时候，可以使用return false来实现阻止默认行为，并且结束后续代码的执行。</p> <p>注意：onmousedown点击事件阻止不了鼠标右键显示浏览器菜单， onmousedown能触发右键的事件，但是右键的事件是oncontextmenu</p> <ul><li>滚轮事件</li></ul> <p>onscroll 滚动事件是监听浏览器的滚动条，只要滚动条的滑块发生变化，就会触发。</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//监听滚动位值发生变化</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;scrolling&quot;</span><span class="token punctuation">)</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//这里是无法阻止滚动事件的</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onmousewheel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//监听鼠标中键滑轮滚动，不监听滚动条拖拽</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;scrolling~&quot;</span><span class="token punctuation">)</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//这里阻止了默认的滚动事件</span>
    <span class="token comment">//但是onmousewheel不兼容火狐，在火狐里要使用DOMMouseScroll，DOMMouseScroll也只支持火狐。并且只支持DOM2级事件。</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在onmousewheel滚动事件中有属性: deltaX和deltaY表示x方向和y方向的滚动差值。下和右为正。</p> <p>兼容处理：</p> <ol><li>确定浏览器</li> <li>确定绑定方式</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mouseWheel</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> bool</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>onmousewheel <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">&quot;mousewheel&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;DOMMouseScroll&quot;</span>
    <span class="token comment">//对火狐浏览器判断</span>
    obj<span class="token punctuation">.</span>addEventListener<span class="token operator">?</span>obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> bool<span class="token punctuation">)</span><span class="token punctuation">:</span>obj<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> bool<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>继续处理兼容性问题。</p> <p>目标： 获取滚动方向和滚动的值。</p> <p>关于滚动方向和滚动的值也需要统一。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">wheel</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>d <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;向 上 滚动了&quot;</span> <span class="token operator">+</span> d<span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;向 下 滚动了&quot;</span> <span class="token operator">+</span> d<span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">mouseWheel</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span>wheel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">mouseWheel</span><span class="token punctuation">(</span><span class="token parameter">dom<span class="token punctuation">,</span>eFn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//真正的事件函数,用来处理统一的值</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
        <span class="token keyword">var</span> direction <span class="token operator">=</span> e<span class="token punctuation">.</span>wheelDelta <span class="token operator">/</span> <span class="token number">120</span> <span class="token operator">||</span> <span class="token operator">-</span>e<span class="token punctuation">.</span>detail <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">//滚动方向和数值保持一致，向上是正1，向下是-1</span>
           <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">eFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>dom<span class="token punctuation">,</span> e<span class="token punctuation">,</span> direction<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">if</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
                   e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                   e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//阻止默认事件</span>
               <span class="token punctuation">}</span>
           <span class="token punctuation">}</span><span class="token comment">//改变函数的this指向</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> type<span class="token punctuation">;</span><span class="token comment">//事件名称</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>onmousewheel <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//主流和IE</span>
        type <span class="token operator">=</span> <span class="token string">&quot;mousewheel&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token comment">//火狐</span>
        type <span class="token operator">=</span> <span class="token string">&quot;DOMMouseScroll&quot;</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
        dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        dom<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 也比较重要, 实际</span>
</code></pre></div><ul><li>阻止事件冒泡</li></ul> <p>这是为了让事件触发的时候外层的盒子不再触发自己的相同事件。</p> <ol><li>可以在事件触发的时候删除掉这个事件的绑定或者监听。</li></ol> <p>注意： 这里存在一个问题。事件绑定会正确清除，但是事件监听，监听程序独立于DOM存在, 我们通过.innerHTML的方式删除。很有可能让监听事件继续存在，占用内存。就好像你排一个人去监视一家童工工厂。然后不管。即使工厂倒闭了或者房子被拆了，那个人都继续在那暗中观察。。。</p> <ol start="2"><li>阻止事件冒泡： 阻止事件顺序往后进一步传递。e.stopPropagation()</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.a&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.b&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.c&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// attachEvent addEventListener</span>
	a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	b<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b被触发&quot;</span><span class="token punctuation">)</span>
    	e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//阻止事件向后传递，到这就停之了</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;c被触发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>根据冒泡顺序： c =&gt; b =&gt; a 但是到b停了，所以是 c=&gt;b</p> <p>如果第三个参数全改成： true。原先触发顺序是 a =&gt; b =&gt; c 到b停止。</p> <p>注意： 这里只有在事件中执行了e.stopPropagation()，后续事件才会阻止冒泡。跳过回调的部分是不阻止的。</p> <p>并且： 事件回调里面再绑定事件，也会执行。这个思路可以用来做拖拽。</p> <h2 id="事件对象-2"><a href="#事件对象-2" aria-hidden="true" class="header-anchor">#</a> 事件对象</h2> <p>不管是DOM0级事件还是DOM2级事件都会传入一个event对象.这个对象包含了事件的相关信息. 包括触发事件的元素,事件类型等.比如鼠标操作触发事件会有鼠标信息,键盘操作触发事件会有键盘信息.所有浏览器都有事件对象但是支持方式不同,存在兼容性问题.</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>window<span class="token punctuation">.</span>_a <span class="token operator">=</span> e<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>window<span class="token punctuation">.</span>_b <span class="token operator">=</span> e<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//点击触发一次事件</span>
_a <span class="token operator">===</span> _b <span class="token comment">//true</span>
<span class="token comment">// 这两个事件对象是同一个</span>
</code></pre></div><table><thead><tr><th>属性名</th> <th>值</th> <th>含义</th></tr></thead> <tbody><tr><td>bubbles</td> <td>布尔型</td> <td>true表示冒泡，false表示不冒泡</td></tr> <tr><td>cancelable</td> <td>布尔型</td> <td>是否可以取消事件的默认行为</td></tr> <tr><td>currentTarget</td> <td>元素对象</td> <td>其事件处理程序当前正在处理事件的那个元素</td></tr> <tr><td>eventPhase</td> <td>数值</td> <td>1表示捕获阶段；2表示“目标阶段”；3：冒泡阶段</td></tr> <tr><td>preventDefault</td> <td>函数</td> <td>执行，就取消事件默认行为，当cancelable为true才行</td></tr> <tr><td>stopImmediatePropagation</td> <td>函数</td> <td>取消后续捕获或冒泡。阻止任何事件处理程序</td></tr> <tr><td>stopPropagation</td> <td>函数</td> <td>取消后续捕获或冒泡。</td></tr> <tr><td>taget</td> <td>元素对象</td> <td>事件的目标</td></tr> <tr><td>trusted</td> <td>布尔型</td> <td>是否是浏览器生成的事件</td></tr> <tr><td>type</td> <td>字符串</td> <td>被触发的事件的类型</td></tr></tbody></table> <p>在事件回调中，this等同于currentTarget，而target只是包含事件的实际目标。如果事件处理函数正好在点击事件触发的对象中，这几个东西是同一个。</p> <p>在IE事件对象中如果是DOM0级绑定的事件。在window对象下可以访问这个属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelelctor</span><span class="token punctuation">(</span><span class="token string">&quot;.btn&quot;</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> event <span class="token operator">=</span> window<span class="token punctuation">.</span>event
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果是attachEvent添加的，会有event参数传入函数。和addeventLlistener一致</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelelctor</span><span class="token punctuation">(</span><span class="token string">&quot;.btn&quot;</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>额外或者不同的属性如下：</p> <table><thead><tr><th>属性名</th> <th>值</th> <th>含义</th></tr></thead> <tbody><tr><td>cancelBubble</td> <td>布尔</td> <td>默认false，可否取消事件冒泡，等同于stopPropagation()</td></tr> <tr><td>returnValue</td> <td>布尔</td> <td>默认为true，设置为false就是取消事件默认行为，等同于preventDefault()</td></tr> <tr><td>srcElement</td> <td>元素</td> <td>事件目标，等同于target</td></tr> <tr><td>type</td> <td>字符串</td> <td>被触发事件的类型</td></tr></tbody></table> <p>浏览器事件对象的兼容性：</p> <p>之前我们写了事件绑定的兼容性写法，现在我们完成事件对象的整合。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> EventUtil <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//这个我之前写过</span>
    <span class="token function-variable function">addHandler</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//bla..bla...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">removeHandle</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//bla..bla...</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">getEvent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getTarget</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> e<span class="token punctuation">.</span>target <span class="token operator">||</span> e<span class="token punctuation">.</span>srcElement
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">preventDefault</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">stopPropagation</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span>cancelBabulle <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>事件类型</strong>：</p> <ul><li>UI事件，当用户于页面上的元素交互的时候触发</li> <li>鼠标事件，当用户获得或失去焦点的时候触发 onclick，ondoubleclick</li> <li>滚动事件，当使用鼠标滚轮（或类似设备）的时候触发</li> <li>文本事件，当输入文本时触发</li> <li>键盘事件，当用户通过键盘在页面上执行操作的时候触发</li> <li>变动事件，当底层DOM结构发生变化时触发</li></ul> <p><strong>鼠标和键盘触发是分状态的.</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousedown&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;鼠标按下&quot;</span><span class="token punctuation">)</span><span class="token comment">//按下触发事件</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mouseup&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;鼠标抬起&quot;</span><span class="token punctuation">)</span><span class="token comment">//在此处抬起鼠标触发事件，和在哪按下没关系</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;鼠标点击&quot;</span><span class="token punctuation">)</span><span class="token comment">//在此处按下并且抬起鼠标触发事件，和时长没关系，在抬起鼠标瞬间触发。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>键盘事件:</strong></p> <p>如果被绑定到具体标签上，则需要聚焦到当前目标，没有聚焦得不能触发，一般写到input标签中或者document中，或者window。</p> <p>在input标签中有输入法得时候也不能触发，只能写到onchange事件</p> <div class="language-js extra-class"><pre class="language-js"><code>input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//按下触发，长按连续触发</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;keydown&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//每次抬起触发，没有长按效果</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keypress&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//按下触发，和keydown类似</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;keypress&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>其中，keydown事件和keypress事件在监输入得时候不能获取到实时得输入内容，会少最后一位，只有keyup可以获取。</p> <p>并且keydown得本质是监听按下事件，任何按键都能触发，但是keypress是监听输入。只有当用户有输入得时候才会触发，也就是说(alt ctrl shift等不会输入得)是不会触发keypress得。</p> <p>其中函数内部接受得参数e是事件对象，里面可以找寻到按键得信息等。</p> <p><strong>UI事件:</strong></p> <p>当页面加载完成得load事件，比如window和img得加载都会触发load事件</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;页面加载成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//有顺序</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;图片加载成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>调整页面大小滚动页面 （resize, scroll）</p> <p>注意： 事件节流就行。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/markdown-note/assets/js/app.10f2f5d4.js" defer></script><script src="/markdown-note/assets/js/22.20ef2aa3.js" defer></script>
  </body>
</html>
