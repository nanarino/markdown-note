<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL语句</title>
    <meta name="description" content="">
    <link rel="shortcut icon" href="./favicon.ico">
    
    <link rel="preload" href="/markdown-note/assets/css/0.styles.bbfe0b79.css" as="style"><link rel="preload" href="/markdown-note/assets/js/app.a730857b.js" as="script"><link rel="preload" href="/markdown-note/assets/js/6.4d707832.js" as="script"><link rel="preload" href="/markdown-note/assets/js/1.19267a43.js" as="script"><link rel="preload" href="/markdown-note/assets/js/67.9b63aafc.js" as="script"><link rel="prefetch" href="/markdown-note/assets/js/10.450906df.js"><link rel="prefetch" href="/markdown-note/assets/js/11.03a7ddb6.js"><link rel="prefetch" href="/markdown-note/assets/js/12.285e2227.js"><link rel="prefetch" href="/markdown-note/assets/js/13.97ba0a9a.js"><link rel="prefetch" href="/markdown-note/assets/js/14.ec3476fb.js"><link rel="prefetch" href="/markdown-note/assets/js/15.bbfd769a.js"><link rel="prefetch" href="/markdown-note/assets/js/16.579621fd.js"><link rel="prefetch" href="/markdown-note/assets/js/17.c9df6a57.js"><link rel="prefetch" href="/markdown-note/assets/js/18.5dfbe4e1.js"><link rel="prefetch" href="/markdown-note/assets/js/19.ebe955b7.js"><link rel="prefetch" href="/markdown-note/assets/js/20.defddc20.js"><link rel="prefetch" href="/markdown-note/assets/js/21.7d4d1fcf.js"><link rel="prefetch" href="/markdown-note/assets/js/22.2899262e.js"><link rel="prefetch" href="/markdown-note/assets/js/23.912e25d3.js"><link rel="prefetch" href="/markdown-note/assets/js/24.7c164a31.js"><link rel="prefetch" href="/markdown-note/assets/js/25.719e12c1.js"><link rel="prefetch" href="/markdown-note/assets/js/26.872fa261.js"><link rel="prefetch" href="/markdown-note/assets/js/27.f2e775cc.js"><link rel="prefetch" href="/markdown-note/assets/js/28.a459bb88.js"><link rel="prefetch" href="/markdown-note/assets/js/29.3a54dc76.js"><link rel="prefetch" href="/markdown-note/assets/js/3.ee307e01.js"><link rel="prefetch" href="/markdown-note/assets/js/30.dd3658bc.js"><link rel="prefetch" href="/markdown-note/assets/js/31.79702987.js"><link rel="prefetch" href="/markdown-note/assets/js/32.2e7dedd5.js"><link rel="prefetch" href="/markdown-note/assets/js/33.96b704bf.js"><link rel="prefetch" href="/markdown-note/assets/js/34.6a993818.js"><link rel="prefetch" href="/markdown-note/assets/js/35.20f1a93b.js"><link rel="prefetch" href="/markdown-note/assets/js/36.da9c6436.js"><link rel="prefetch" href="/markdown-note/assets/js/37.d549bbb2.js"><link rel="prefetch" href="/markdown-note/assets/js/38.32760f20.js"><link rel="prefetch" href="/markdown-note/assets/js/39.01a5e4c7.js"><link rel="prefetch" href="/markdown-note/assets/js/4.e5a448a1.js"><link rel="prefetch" href="/markdown-note/assets/js/40.3db3550a.js"><link rel="prefetch" href="/markdown-note/assets/js/41.eeab1495.js"><link rel="prefetch" href="/markdown-note/assets/js/42.cd0f2e3a.js"><link rel="prefetch" href="/markdown-note/assets/js/43.2dd76db4.js"><link rel="prefetch" href="/markdown-note/assets/js/44.c36f644e.js"><link rel="prefetch" href="/markdown-note/assets/js/45.d9ce19fc.js"><link rel="prefetch" href="/markdown-note/assets/js/46.70044768.js"><link rel="prefetch" href="/markdown-note/assets/js/47.8f8f07bc.js"><link rel="prefetch" href="/markdown-note/assets/js/48.a471ae00.js"><link rel="prefetch" href="/markdown-note/assets/js/49.399a9533.js"><link rel="prefetch" href="/markdown-note/assets/js/5.843fbad2.js"><link rel="prefetch" href="/markdown-note/assets/js/50.2cec459c.js"><link rel="prefetch" href="/markdown-note/assets/js/51.04ac969c.js"><link rel="prefetch" href="/markdown-note/assets/js/52.dd8e7b3c.js"><link rel="prefetch" href="/markdown-note/assets/js/53.5dcd3c45.js"><link rel="prefetch" href="/markdown-note/assets/js/54.7dafa28e.js"><link rel="prefetch" href="/markdown-note/assets/js/55.39aee5f1.js"><link rel="prefetch" href="/markdown-note/assets/js/56.2bad3fa8.js"><link rel="prefetch" href="/markdown-note/assets/js/57.c0b9b3f7.js"><link rel="prefetch" href="/markdown-note/assets/js/58.f7911fde.js"><link rel="prefetch" href="/markdown-note/assets/js/59.66850ea7.js"><link rel="prefetch" href="/markdown-note/assets/js/60.0cc12683.js"><link rel="prefetch" href="/markdown-note/assets/js/61.823dd71b.js"><link rel="prefetch" href="/markdown-note/assets/js/62.c778229e.js"><link rel="prefetch" href="/markdown-note/assets/js/63.9ed45b7d.js"><link rel="prefetch" href="/markdown-note/assets/js/64.837e466d.js"><link rel="prefetch" href="/markdown-note/assets/js/65.9ea5ad7a.js"><link rel="prefetch" href="/markdown-note/assets/js/66.d4981cb6.js"><link rel="prefetch" href="/markdown-note/assets/js/68.eef5ae8b.js"><link rel="prefetch" href="/markdown-note/assets/js/69.bed8261f.js"><link rel="prefetch" href="/markdown-note/assets/js/7.d036849c.js"><link rel="prefetch" href="/markdown-note/assets/js/70.8811effb.js"><link rel="prefetch" href="/markdown-note/assets/js/71.ef4130a9.js"><link rel="prefetch" href="/markdown-note/assets/js/72.6781bfd3.js"><link rel="prefetch" href="/markdown-note/assets/js/73.c6de1c31.js"><link rel="prefetch" href="/markdown-note/assets/js/74.ec7c5d81.js"><link rel="prefetch" href="/markdown-note/assets/js/75.8d161c81.js"><link rel="prefetch" href="/markdown-note/assets/js/76.97a15235.js"><link rel="prefetch" href="/markdown-note/assets/js/77.85c4a4ed.js"><link rel="prefetch" href="/markdown-note/assets/js/78.92983aca.js"><link rel="prefetch" href="/markdown-note/assets/js/79.a2a42d7d.js"><link rel="prefetch" href="/markdown-note/assets/js/8.0a01bbb8.js"><link rel="prefetch" href="/markdown-note/assets/js/80.3d82ed7f.js"><link rel="prefetch" href="/markdown-note/assets/js/81.2dd53ef0.js"><link rel="prefetch" href="/markdown-note/assets/js/9.d5437aed.js">
    <link rel="stylesheet" href="/markdown-note/assets/css/0.styles.bbfe0b79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown-note/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>起步</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面向对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>WEB相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdown-note/py/30-SQL语句.html" class="active sidebar-link">SQL语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown-note/py/30-SQL语句.html#安装启动和终端链接" class="sidebar-link">安装启动和终端链接</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/30-SQL语句.html#数据库操作" class="sidebar-link">数据库操作</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/30-SQL语句.html#数据表基本操作" class="sidebar-link">数据表基本操作</a></li></ul></li><li><a href="/markdown-note/py/31-pymssql模块.html" class="sidebar-link">pymssql模块</a></li><li><a href="/markdown-note/py/32-Django.html" class="sidebar-link">Django框架</a></li><li><a href="/markdown-note/py/33-Tornado.html" class="sidebar-link">Tornado框架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂项模块</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sql语句"><a href="#sql语句" class="header-anchor">#</a> SQL语句</h1> <p>这里以mysql数据库为例</p> <p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下公司。MySQL 最流行的关系型数据库管理系统，在 WEB 应用方面MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</p> <div class="custom-block tip"><p class="custom-block-title">关于数据库</p> <p>本笔记只记录基础命令，详细的数据库用法请左转其官方文档。</p></div> <h2 id="安装启动和终端链接"><a href="#安装启动和终端链接" class="header-anchor">#</a> 安装启动和终端链接</h2> <h3 id="linux版本"><a href="#linux版本" class="header-anchor">#</a> Linux版本</h3> <h4 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> mysql-server　　
</code></pre></div><p>个人推荐使用 宝塔Linux面板 一键安装 然后重置密码</p> <h4 id="服务端启动"><a href="#服务端启动" class="header-anchor">#</a> 服务端启动</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@akokono.com ~<span class="token punctuation">]</span><span class="token comment"># service mysqld start</span>
Starting mysqld:                                           <span class="token punctuation">[</span>  OK  <span class="token punctuation">]</span>
</code></pre></div><h4 id="客户端连接"><a href="#客户端连接" class="header-anchor">#</a> 客户端连接</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>连接：
	<span class="token comment">#和win一样</span>
    mysql -h <span class="token function">host</span> -u user -p
 
常见错误：
    ERROR <span class="token number">2002</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>:
    	Can<span class="token string">'t connect to local MySQL server through socket '</span>/tmp/mysql.sock' <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>, 
    	it means that the MySQL server daemon <span class="token punctuation">(</span>Unix<span class="token punctuation">)</span> or <span class="token function">service</span> <span class="token punctuation">(</span>Windows<span class="token punctuation">)</span> is not running.

退出：
    QUIT 或者 Control+D
</code></pre></div><h3 id="windows版本"><a href="#windows版本" class="header-anchor">#</a> Windows版本</h3> <p>MySQL解压后的 bin 目录下有一大堆的可执行文件，执行如下命令初始化数据：</p> <p>其默认未给root账户设置密码</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> c:<span class="token punctuation">\</span>mysql-5.7.16-winx64<span class="token punctuation">\</span>bin
mysqld --initialize-insecure
</code></pre></div><p>进入可执行文件目录启动,或将MySQL可执行文件添加到环境变量中 :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 进入可执行文件目录</span>
<span class="token builtin class-name">cd</span> c:<span class="token punctuation">\</span>mysql-5.7.16-winx64<span class="token punctuation">\</span>bin
<span class="token comment"># 启动MySQL服务</span>
mysqld
</code></pre></div><p>启动MySQL客户端并连接MySQL服务</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 进入可执行文件目录</span>
<span class="token builtin class-name">cd</span> c:<span class="token punctuation">\</span>mysql-5.7.16-winx64<span class="token punctuation">\</span>bin
<span class="token comment"># 连接MySQL服务器</span>
mysql -u root -p
<span class="token comment"># 提示请输入密码，直接回车</span>
</code></pre></div><p>如想日后操作简便，可以做如下操作：将MySQL服务制作成windows服务</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 制作MySQL的Windows服务，在终端执行此命令：</span>
<span class="token string">&quot;c:\mysql-5.7.16-winx64<span class="token entity" title="\b">\b</span>in\mysqld&quot;</span> --install
<span class="token comment"># 移除MySQL的Windows服务，在终端执行此命令：</span>
<span class="token string">&quot;c:\mysql-5.7.16-winx64<span class="token entity" title="\b">\b</span>in\mysqld&quot;</span> --remove
</code></pre></div><p>注册成服务之后，以后再启动和关闭MySQL服务时，仅需执行如下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 启动MySQL服务</span>
net start mysql
<span class="token comment"># 关闭MySQL服务</span>
net stop mysql
</code></pre></div><h2 id="数据库操作"><a href="#数据库操作" class="header-anchor">#</a> 数据库操作</h2> <h4 id="显示数据库"><a href="#显示数据库" class="header-anchor">#</a> 显示数据库</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span> 
</code></pre></div><p>默认已存在的数据库：</p> <ul><li>mysql - 用户权限相关数据</li> <li>test - 用于用户测试数据</li> <li>information_schema - MySQL本身架构相关数据</li></ul> <h4 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># utf-8</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> 数据库名称 <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci<span class="token punctuation">;</span>
<span class="token comment"># gbk</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> 数据库名称 <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> gbk <span class="token keyword">COLLATE</span> gbk_chinese_ci<span class="token punctuation">;</span>
</code></pre></div><h4 id="使用数据库"><a href="#使用数据库" class="header-anchor">#</a> 使用数据库</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> 数据库名称<span class="token punctuation">;</span>
<span class="token comment">#显示当前使用的数据库中所有表：</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="用户管理"><a href="#用户管理" class="header-anchor">#</a> 用户管理</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#创建用户</span>
    <span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'用户名'</span><span class="token variable">@'IP地址'</span> identified <span class="token keyword">by</span> <span class="token string">'密码'</span><span class="token punctuation">;</span>
<span class="token comment">#删除用户</span>
    <span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token string">'用户名'</span><span class="token variable">@'IP地址'</span><span class="token punctuation">;</span>
<span class="token comment">#修改用户</span>
    <span class="token keyword">rename</span> <span class="token keyword">user</span> <span class="token string">'用户名'</span><span class="token variable">@'IP地址'</span><span class="token punctuation">;</span> <span class="token keyword">to</span> <span class="token string">'新用户名'</span><span class="token variable">@'IP地址'</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token comment">#修改密码</span>
    <span class="token keyword">set</span> password <span class="token keyword">for</span> <span class="token string">'用户名'</span><span class="token variable">@'IP地址'</span> <span class="token operator">=</span> Password<span class="token punctuation">(</span><span class="token string">'新密码'</span><span class="token punctuation">)</span>
<span class="token comment">#用户权限相关数据保存在mysql数据库的user表中，</span>
<span class="token comment">#所以也可以直接对其进行操作（不建议）</span>
</code></pre></div><h5 id="授权管理"><a href="#授权管理" class="header-anchor">#</a> 授权管理</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token string">'用户'</span><span class="token variable">@'IP地址'</span>               <span class="token comment">-- 查看权限</span>
<span class="token keyword">grant</span>  权限 <span class="token keyword">on</span> 数据库<span class="token punctuation">.</span>表 <span class="token keyword">to</span>   <span class="token string">'用户'</span><span class="token variable">@'IP地址'</span>   <span class="token comment">-- 授权</span>
<span class="token keyword">revoke</span> 权限 <span class="token keyword">on</span> 数据库<span class="token punctuation">.</span>表 <span class="token keyword">from</span> <span class="token string">'用户'</span><span class="token variable">@'IP地址'</span>   <span class="token comment">-- 取消权限</span>
</code></pre></div><h4 id="数据库表的表示"><a href="#数据库表的表示" class="header-anchor">#</a> 数据库表的表示</h4> <p>内部</p> <div class="language-sql extra-class"><pre class="language-sql"><code>数据库名<span class="token punctuation">.</span><span class="token operator">*</span>           <span class="token comment">-- 数据库中的所有</span>
数据库名<span class="token punctuation">.</span>表          <span class="token comment">-- 指定数据库中的某张表</span>
数据库名<span class="token punctuation">.</span>存储过程     <span class="token comment">-- 指定数据库中的存储过程</span>
<span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span>                <span class="token comment">-- 所有数据库</span>
</code></pre></div><p>外部</p> <div class="language-sql extra-class"><pre class="language-sql"><code>用户名<span class="token variable">@IP</span>地址         <span class="token comment">-- 用户只能在改IP下才能访问</span>
用户名<span class="token variable">@192.168.1.</span><span class="token operator">%</span>   <span class="token comment">-- 用户只能在改IP段下才能访问(通配符%表示任意)</span>
用户名@<span class="token operator">%</span>             <span class="token comment">-- 用户可以再任意IP下访问(默认IP地址为%)</span>
</code></pre></div><p>示例</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> db1<span class="token punctuation">.</span>tb1 <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'IP'</span>
<span class="token keyword">grant</span> <span class="token keyword">select</span> <span class="token keyword">on</span> db1<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'IP'</span>
<span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">insert</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'IP'</span>
<span class="token keyword">revoke</span> <span class="token keyword">select</span> <span class="token keyword">on</span> db1<span class="token punctuation">.</span>tb1 <span class="token keyword">from</span> <span class="token string">'用户名'</span><span class="token variable">@'IP'</span>
</code></pre></div><p>特殊的：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>flush <span class="token keyword">privileges</span>  <span class="token comment">#将数据读取到内存中，从而立即生效。 </span>
</code></pre></div><p>忘记密码:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 启动免授权服务端</span>
mysqld --skip-grant-tables
<span class="token comment"># 客户端</span>
mysql -u root -p
<span class="token comment"># 修改用户名密码</span>
update mysql.user <span class="token builtin class-name">set</span> <span class="token assign-left variable">authentication_string</span><span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">'666'</span><span class="token punctuation">)</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre></div><h2 id="数据表基本操作"><a href="#数据表基本操作" class="header-anchor">#</a> 数据表基本操作</h2> <h4 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h4> <p>not null 不可为空<br>
defalut 默认值<br>
null 可以为空</p> <p><code>engine=innodb</code> mysql支持事务性操作 失败回滚
<code>engine=myisam</code> mysql支持全局索引 失败不回滚 默认</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> tb1<span class="token punctuation">(</span>
    nid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> defalut <span class="token number">2</span><span class="token punctuation">,</span>
    num <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8
</code></pre></div><p><code>auto_increment</code> 自增<br> <code>primary key</code> 主键</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> tb1<span class="token punctuation">(</span>
    nid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    num <span class="token keyword">int</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span>
<span class="token comment">--    或</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tb1<span class="token punctuation">(</span>
    nid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    num <span class="token keyword">int</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    <span class="token keyword">index</span><span class="token punctuation">(</span>nid<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment">-- 注意：</span>
<span class="token comment">-- 对于自增列，必须是索引（含主键）。</span>
<span class="token comment">-- 对于自增可以设置步长和起始值</span>
<span class="token keyword">show</span> <span class="token keyword">session</span> variables <span class="token operator">like</span> <span class="token string">'auto_inc%'</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token keyword">session</span> auto_increment_increment<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token keyword">session</span> auto_increment_offset<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>

shwo <span class="token keyword">global</span>  variables <span class="token operator">like</span> <span class="token string">'auto_inc%'</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> auto_increment_increment<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> auto_increment_offset<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#主键，</span>
<span class="token comment">-- 一种特殊的唯一索引，不允许有空值，</span>
<span class="token comment">-- 如果主键使用单个列，则它的值必须唯一，</span>
<span class="token comment">-- 如果是多列，则其组合必须唯一。</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tb1<span class="token punctuation">(</span>
    nid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    num <span class="token keyword">int</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span>
<span class="token comment">-- 或</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tb1<span class="token punctuation">(</span>
    nid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    num <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>nid<span class="token punctuation">,</span>num<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p><code>foreign key</code> 外键</p> <div class="language-sql extra-class"><pre class="language-sql"><code>creat <span class="token keyword">table</span> color<span class="token punctuation">(</span>
	nid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	name <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> fruit<span class="token punctuation">(</span>
	nid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	smt <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token boolean">null</span> <span class="token punctuation">,</span>
	color_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> fk_cc <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>color_id<span class="token punctuation">)</span> <span class="token keyword">references</span> color<span class="token punctuation">(</span>nid<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><h4 id="静态表型数据"><a href="#静态表型数据" class="header-anchor">#</a> 静态表型数据</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 表名<span class="token punctuation">(</span>第一行<span class="token punctuation">,</span>第二行<span class="token punctuation">)</span>
</code></pre></div><h4 id="删除表"><a href="#删除表" class="header-anchor">#</a> 删除表</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> 表名
</code></pre></div><h4 id="清空表"><a href="#清空表" class="header-anchor">#</a> 清空表</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名
<span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名
</code></pre></div><h4 id="修改表"><a href="#修改表" class="header-anchor">#</a> 修改表</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#添加列：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 列名 类型
<span class="token comment">#删除列：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">column</span> 列名
<span class="token comment">#修改列：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> <span class="token keyword">column</span> 列名 类型<span class="token punctuation">;</span>  <span class="token comment">-- 类型</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change 原列名 新列名 类型<span class="token punctuation">;</span> <span class="token comment">-- 列名，类型</span>
  
<span class="token comment">#添加主键：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#删除主键：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名  <span class="token keyword">modify</span>  列名 <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
  
<span class="token comment">#添加外键：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 从表 <span class="token keyword">add</span> <span class="token keyword">constraint</span> 外键名称（形如：FK_从表_主表）
<span class="token keyword">foreign</span> <span class="token keyword">key</span> 从表<span class="token punctuation">(</span>外键字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表<span class="token punctuation">(</span>主键字段<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#删除外键：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> 外键名称

<span class="token comment">#修改默认值：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> testalter_tbl <span class="token keyword">alter</span> i <span class="token keyword">set</span> <span class="token keyword">default</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token comment">#删除默认值：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> testalter_tbl <span class="token keyword">alter</span> i <span class="token keyword">drop</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="表内容基本操作"><a href="#表内容基本操作" class="header-anchor">#</a> 表内容基本操作</h3> <p>mysql存值的基本数据类型</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">bit</span><span class="token punctuation">[</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token comment">#二进制位（101001），m表示二进制位的长度（1-64），默认m＝1</span>

<span class="token keyword">tinyint</span><span class="token punctuation">[</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">unsigned</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>zerofill<span class="token punctuation">]</span>
  <span class="token comment">#小整数，数据类型用于保存一些范围的整数数值范围：</span>
  <span class="token comment">#特别的： MySQL中无布尔值，使用tinyint(1)构造。</span>

<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">unsigned</span><span class="token punctuation">]</span><span class="token punctuation">[</span>zerofill<span class="token punctuation">]</span>
  <span class="token comment">#整数，数据类型用于保存一些范围的整数数值范围</span>

<span class="token keyword">bigint</span><span class="token punctuation">[</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">unsigned</span><span class="token punctuation">]</span><span class="token punctuation">[</span>zerofill<span class="token punctuation">]</span>
  <span class="token comment">#大整数，数据类型用于保存一些范围的整数数值范围</span>

<span class="token keyword">decimal</span><span class="token punctuation">[</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token punctuation">,</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">unsigned</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>zerofill<span class="token punctuation">]</span>
  <span class="token comment">#准确的十进制，m是数字总个数（负号不算），d是小数点后个数。 m最大值为65，d最大值为30。</span>

<span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">unsigned</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>zerofill<span class="token punctuation">]</span>
  <span class="token comment">#单精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。数值越大，越不准确</span>


<span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">unsigned</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>zerofill<span class="token punctuation">]</span>
  <span class="token comment">#双精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。数值越大，越不准确</span>
  
<span class="token keyword">char</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span>
  <span class="token comment">#char数据类型用于表示固定长度的字符串，可以包含最多达255个字符。</span>
  <span class="token comment">#其中m代表字符串的长度。即使数据小于m长度，也会占用m长度</span>
  
<span class="token keyword">varchar</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
  <span class="token comment">#varchars数据类型用于变长的字符串，可以包含最多达255个字符。</span>
  <span class="token comment">/**其中m代表该数据类型所允许保存的字符串的最大长度，
    	只要长度小于该最大值的字符串都可以被保存在该数据类型中。
    	注：虽然varchar使用起来较为灵活，但是从整个系统的性能角度来说，
    	char数据类型的处理速度更快，有时甚至可以超出varchar处理速度的50%。
    	因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡**/</span>

<span class="token keyword">text</span>
  <span class="token comment">#text数据类型用于保存变长的大字符串，可以组多到65535 (2**16 − 1)个字符。</span>

<span class="token keyword">mediumtext</span>
  <span class="token comment">#A TEXT column with a maximum length of 16,777,215 (2**24 − 1) characters.</span>

<span class="token keyword">longtext</span>
  <span class="token comment">#A TEXT column with a maximum length of 4,294,967,295 or 4GB (2**32 − 1) characters.</span>

<span class="token keyword">enum</span>
  <span class="token comment">#枚举类型</span>
  <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> shirts <span class="token punctuation">(</span>
      name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      size <span class="token keyword">ENUM</span><span class="token punctuation">(</span><span class="token string">'x-small'</span><span class="token punctuation">,</span> <span class="token string">'small'</span><span class="token punctuation">,</span> <span class="token string">'medium'</span><span class="token punctuation">,</span> <span class="token string">'large'</span><span class="token punctuation">,</span> <span class="token string">'x-large'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> shirts <span class="token punctuation">(</span>name<span class="token punctuation">,</span> size<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> 
      <span class="token punctuation">(</span><span class="token string">'dress shirt'</span><span class="token punctuation">,</span><span class="token string">'large'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'t-shirt'</span><span class="token punctuation">,</span><span class="token string">'medium'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'polo shirt'</span><span class="token punctuation">,</span><span class="token string">'small'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">set</span>
  <span class="token comment">#集合类型</span>
  <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> myset <span class="token punctuation">(</span>col <span class="token keyword">SET</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> myset <span class="token punctuation">(</span>col<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'a,d'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'d,a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'a,d,a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'a,d,d'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'d,a,d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DATE</span>
  <span class="token comment">#YYYY-MM-DD（1000-01-01/9999-12-31）</span>

<span class="token keyword">TIME</span>
  <span class="token comment">#HH:MM:SS（'-838:59:59'/'838:59:59'）</span>

<span class="token keyword">YEAR</span>
  <span class="token comment">#YYYY（1901/2155）</span>

<span class="token keyword">DATETIME</span>
  <span class="token comment">#YYYY-MM-DD HH:MM:SS（1000-01-01 00:00:00/9999-12-31 23:59:59    Y）</span>

<span class="token keyword">TIMESTAMP</span>
  <span class="token comment">#YYYYMMDD HHMMSS（1970-01-01 00:00:00/2037 年某时）</span>
</code></pre></div><p><em>二进制数据：TinyBlob、Blob、MediumBlob、LongBlob</em></p> <h4 id="增"><a href="#增" class="header-anchor">#</a> 增</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 表 <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>值<span class="token punctuation">,</span>值<span class="token punctuation">,</span>值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表 <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>值<span class="token punctuation">,</span>值<span class="token punctuation">,</span>值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值<span class="token punctuation">,</span>值<span class="token punctuation">,</span>值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表 <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token punctuation">(</span>列名<span class="token punctuation">,</span>列名<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">from</span> 表
</code></pre></div><h4 id="删"><a href="#删" class="header-anchor">#</a> 删</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表
<span class="token keyword">delete</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id＝<span class="token number">1</span> <span class="token operator">and</span> name＝<span class="token string">'alex'</span><span class="token number">1</span>
</code></pre></div><h4 id="改"><a href="#改" class="header-anchor">#</a> 改</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> 表 <span class="token keyword">set</span> name ＝ <span class="token string">'alex'</span> <span class="token keyword">where</span> id<span class="token operator">&gt;</span><span class="token number">1</span>
</code></pre></div><h4 id="查"><a href="#查" class="header-anchor">#</a> 查</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#打印完整表</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id <span class="token operator">&gt;</span> <span class="token number">1</span>
<span class="token keyword">select</span> nid<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender <span class="token keyword">as</span> gg <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id <span class="token operator">&gt;</span> <span class="token number">1</span>
</code></pre></div><h4 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h4> <div class="language-sql extra-class"><pre class="language-sql"><code>a、条件
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">and</span> name <span class="token operator">!=</span> <span class="token string">'alex'</span> <span class="token operator">and</span> num <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
 
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id <span class="token operator">between</span> <span class="token number">5</span> <span class="token operator">and</span> <span class="token number">16</span><span class="token punctuation">;</span>
 
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">)</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">)</span>
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> nid <span class="token keyword">from</span> 表<span class="token punctuation">)</span>
 
b、通配符
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'ale%'</span>  <span class="token operator">-</span> ale开头的所有（多个字符串）
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'ale_'</span>  <span class="token operator">-</span> ale开头的所有（一个字符）
 
c、限制
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span>            <span class="token operator">-</span> 前<span class="token number">5</span>行
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">limit</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>          <span class="token operator">-</span> 从第<span class="token number">4</span>行开始的<span class="token number">5</span>行
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">limit</span> <span class="token number">5</span> <span class="token keyword">offset</span> <span class="token number">4</span>    <span class="token operator">-</span> 从第<span class="token number">4</span>行开始的<span class="token number">5</span>行
 
d、排序
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">order</span> <span class="token keyword">by</span> 列 <span class="token keyword">asc</span>              <span class="token operator">-</span> 根据 “列” 从小到大排列
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">order</span> <span class="token keyword">by</span> 列 <span class="token keyword">desc</span>             <span class="token operator">-</span> 根据 “列” 从大到小排列
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表 <span class="token keyword">order</span> <span class="token keyword">by</span> 列<span class="token number">1</span> <span class="token keyword">desc</span><span class="token punctuation">,</span> 列<span class="token number">2</span> <span class="token keyword">asc</span>    <span class="token operator">-</span> 根据 “列<span class="token number">1</span>” 从大到小排列，如果相同则按列<span class="token number">2</span>从小到大排序
 
e、分组
    <span class="token keyword">select</span> num <span class="token keyword">from</span> 表 <span class="token keyword">group</span> <span class="token keyword">by</span> num
    <span class="token keyword">select</span> num<span class="token punctuation">,</span>nid <span class="token keyword">from</span> 表 <span class="token keyword">group</span> <span class="token keyword">by</span> num<span class="token punctuation">,</span>nid
    <span class="token keyword">select</span> num<span class="token punctuation">,</span>nid <span class="token keyword">from</span> 表  <span class="token keyword">where</span> nid <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token keyword">group</span> <span class="token keyword">by</span> num<span class="token punctuation">,</span>nid <span class="token keyword">order</span> nid <span class="token keyword">desc</span>
    <span class="token keyword">select</span> num<span class="token punctuation">,</span>nid<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">from</span> 表 <span class="token keyword">group</span> <span class="token keyword">by</span> num<span class="token punctuation">,</span>nid
 
    <span class="token keyword">select</span> num <span class="token keyword">from</span> 表 <span class="token keyword">group</span> <span class="token keyword">by</span> num <span class="token keyword">having</span> <span class="token function">max</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span>
 
    特别的：<span class="token keyword">group</span> <span class="token keyword">by</span> 必须在<span class="token keyword">where</span>之后，<span class="token keyword">order</span> <span class="token keyword">by</span>之前
 
f、连表
    无对应关系则不显示
    <span class="token keyword">select</span> A<span class="token punctuation">.</span>num<span class="token punctuation">,</span> A<span class="token punctuation">.</span>name<span class="token punctuation">,</span> B<span class="token punctuation">.</span>name
    <span class="token keyword">from</span> A<span class="token punctuation">,</span>B
    <span class="token keyword">Where</span> A<span class="token punctuation">.</span>nid <span class="token operator">=</span> B<span class="token punctuation">.</span>nid
 
    无对应关系则不显示
    <span class="token keyword">select</span> A<span class="token punctuation">.</span>num<span class="token punctuation">,</span> A<span class="token punctuation">.</span>name<span class="token punctuation">,</span> B<span class="token punctuation">.</span>name
    <span class="token keyword">from</span> A <span class="token keyword">inner</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>nid <span class="token operator">=</span> B<span class="token punctuation">.</span>nid
 
    A表所有显示，如果B中无对应关系，则值为<span class="token boolean">null</span>
    <span class="token keyword">select</span> A<span class="token punctuation">.</span>num<span class="token punctuation">,</span> A<span class="token punctuation">.</span>name<span class="token punctuation">,</span> B<span class="token punctuation">.</span>name
    <span class="token keyword">from</span> A <span class="token keyword">left</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>nid <span class="token operator">=</span> B<span class="token punctuation">.</span>nid
 
    B表所有显示，如果B中无对应关系，则值为<span class="token boolean">null</span>
    <span class="token keyword">select</span> A<span class="token punctuation">.</span>num<span class="token punctuation">,</span> A<span class="token punctuation">.</span>name<span class="token punctuation">,</span> B<span class="token punctuation">.</span>name
    <span class="token keyword">from</span> A <span class="token keyword">right</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>nid <span class="token operator">=</span> B<span class="token punctuation">.</span>nid
 
g、组合
    组合，自动处理重合
    <span class="token keyword">select</span> nickname
    <span class="token keyword">from</span> A
    <span class="token keyword">union</span>
    <span class="token keyword">select</span> name
    <span class="token keyword">from</span> B
 
    组合，不处理重合
    <span class="token keyword">select</span> nickname
    <span class="token keyword">from</span> A
    <span class="token keyword">union</span> <span class="token keyword">all</span>
    <span class="token keyword">select</span> name
    <span class="token keyword">from</span> B
</code></pre></div><p>mysql之外的其他关系型数据库的用法大致相同。使用pymysql可用同步执行mysql的事务。</p> <p>篇幅有限。变量，函数，存储过程，触发器等知识略过。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/markdown-note/py/29-协程.html" class="prev">协程</a></span> <span class="next"><a href="/markdown-note/py/31-pymssql模块.html">pymssql模块</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/markdown-note/assets/js/app.a730857b.js" defer></script><script src="/markdown-note/assets/js/6.4d707832.js" defer></script><script src="/markdown-note/assets/js/1.19267a43.js" defer></script><script src="/markdown-note/assets/js/67.9b63aafc.js" defer></script>
  </body>
</html>
