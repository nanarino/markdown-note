# 数学对象和日期对象

## Math对象

**JS中的计算只能取到合理近似值(误差很小),请理性看待，合理使用**

```js
.1+.2;//0.30000000000000004
```

Math是一个JavaScript内置对象，在window对象下的一个属性

```js
Math === window.Math
```

数学中我们常用的计算以及参数都会保存在Math对象中。

圆周率π和自然常数e

```js
Math.PI;//3.1415926...
//计算面积，概率都会用到
Math.E;//2.71828182...
//计算指数对数都会用到
```

* 算术平方根Math.sqrt

计算开方结果

```js
Math.sqrt(2)*Math.sqrt(2);//2.0000000000000004约等于2
```

* pow指数

```js
Math.pow(2,3);//2的3次方
```

*  floor和ceil和round和trunc（向下取整，向上取整，四舍五入，删除小数部分）

* 三角函数，反三角函数

计算相对位置，角度，游戏中常用到的边界碰撞判断等。

弧度制：弧度是一个角的张开程度，单位rad通常省略。有正负。

规定平面内一条线段绕端点旋转一周回到初始位置所扫过的角度为Math.PI*2，对应360deg，逆时针为正，顺时针为负数。

正弦：Math.sin

某一角度的计算值。此角度(0,Math.PI/2)形成直角三角形对边除以斜边的值

```js
Math.sin(Math.PI/6);//0.49999999999999994约等于0.5
```

余弦：Math.cos

某一角度的计算值。此角度(0,Math.PI/2)形成直角三角形邻边比斜边的值

```js
Math.cos(Math.PI/3);//0.5000000000000001约等于0.5
```

正切：Math.tan

某一角度的计算值。此角度(0,Math.PI/2)形成直角三角形对边比邻的边的值

```js
Math.tan(Math.PI/4);//0.9999999999999999约等于0.5
```

* 反三角 asin/acos/stan，根据正弦值余弦值正切值返回对应的弧度

* 返回随机数Math.random,返回大于0小于1的随机数

```js
let rdm = Math.random();//
rdm = Math.random();
rdm = Math.random();
```

自行封装的随机数生成大于n小于m的随机数

```js
let myRandom = (n = 0,m = 1)=>(Math.random()*(m-n)+n)
```

思考： 投出一个色子，6的概率为50%，1的概率3%，怎么实现？

* 求不超过n的最大整数，取整

```js
Math.floor(3.15);//3
Math.floor(-2.3);//-3
```

* 绝对值Math.abs
* 求一组数的最大值Math.max与最小值Math.min

```js
let arr = [1,3,4,99,0]
Math.max(...arr);//0
Math.min(...arr);//99
```

* parseInt和parseFloat

  解析传入的字符串，返回一个符合要求的10进制数，解析不出来返回NaN

  paseInt 返回整数

  传入两个参数： 第一个是需要解析的字符串，必填

  第二个是进制基数2-36(0-9,a-z)，当前传入的字符串的进制是多少，不填默认是10

  ```js
  parseInt("1123.asdasd");//1123
  parseInt("a123");//NaN
  parseInt("Infinity");//Infinity
  parseInt("123",16);//以16进制识别123，值为1*16*16+2*16^1+3
  parseInt("zzz",36);//以36进制识别zzz，值为35*36*16+35*36+35
  parseInt(123,2);//123转字符串"123",2进制识别1 转2进制 1*Math.pow(2,0)
  ```

  paseFloat返回带小数点的浮点类型

  返回整数或者小数，支持科学记数法，解析不出来返回NaN

  ```js
  parseFloat("123.231");//123.231
  parseFloat({toString(){return 1}});//1 底层是对传入的参数使用toString方法,或者valueOf方法
  parseFloat([1,23,5])// 1 
  parseFloat("asd");//NaN
  parseFloat("2e-3");//0.003
  parseFloat("2.32E3");//2320
  parseFloat("0x13");//0
  ```


## 指数运算符(**) 

指数运算公式 ** ：(es6新出，支持赋值)

```js
Math.pow(3,4);//81
3**4；//81
let a = 2;
a**=3;//8
//等同于 a=a**3;
```



## Date对象

Date是~~约会的意思~~是日期的意思。

Date是一个日期对象模型，和Math非常相似。

```js
Date===window.Date;//true
typeof Date;//"function"
typeof Date();//"string"
//"Wed Oct 10 2018 13:55:33 GMT+0800 (中国标准时间)"
```

运行Date()返回一个日期的字符串表示：

​	周几 月份 日期 年 时:分:秒 时制+时区（补充）

- new Date()创建新的时间对象

```js
let time = new Date();
typeof time;//"object"
```

new Date()的参数： 不写返回当前日期与时间

只有一个参数的时候。此参数表示从1970年1月1日 0:0:0到现在经过的毫秒数

```js
let t = new Date(1539151802132);
//返回Wed Oct 10 2018 14:10:02 GMT+0800 (中国标准时间)的对象
```

可依照顺序传入年,月,日,时,分,秒。其中年写2位数，表示19xx年，通常4位数，月填写0表示一月11表示12月，大于12表示多加一年1，日从1开始超出减少同样影响月份。时是24进制，分和秒都是60进制

```js
time = new Date(2018,10,10,22,10,66)；
//返回Sat Nov 10 2018 22:11:06 GMT+0800 (中国标准时间)的对象
```

不同的时间或者单独的年/月/日都可以进行比较

## Date对象的方法

API(Application Programming Interface)

Date对象的方法：参考http://www.runoob.com/jsref/jsref-obj-date.html

- valueOf 返回Date对象的原始值(等同于getTime)

```js
let time = new Date(2018,10,10,22,10,66);
time.valueOf();//1541859066000
```

- getDate 返回日期在当月的几号(1-31)
- getDay 返回日期在本周的周几(0-6) **0是周天** 
- getHours/getFullYear/getMonth/getMinutes/getSeconds 自行翻译理解

  其中浏览器内部时间是东八区时间(北京)。可以在get和时间关键词中间添加UTC表示格林尼治时间。

- getUTCHours/getUTCFullYear/getUTCMonth/getUTCDay/getUTCDate/getUTCMinutes/getUTCSeconds

设置日期：将前面的get换成set传入参数就可以了，注意参数的范围与类型

## 倒计时的实现

通过定时器将获取日期时间，然后计算界限。

1. 刷新获取当前时间
2. 推算倒计时结束之后是多少时间(目标时间)
3. 然后定时器获取时间与目标时间比较，如果当前时间大于目标时间则执行回调函数，并结束定时器。