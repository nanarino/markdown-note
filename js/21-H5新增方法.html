<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>H5新增方法 | nanarino note</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="shortcut icon" href="./favicon.ico">
    <meta name="description" content="今年的冬天很长吧？然后我最喜欢的赏樱推迟又推……终于，以为到了春天，樱花却突然很快的开了，又很快地凋谢了……这么悔恨的年份根本就没有吧？">
    
    <link rel="preload" href="/markdown-note/assets/css/0.styles.9d4be43c.css" as="style"><link rel="preload" href="/markdown-note/assets/js/app.6b4725cf.js" as="script"><link rel="preload" href="/markdown-note/assets/js/8.ae913670.js" as="script"><link rel="preload" href="/markdown-note/assets/js/1.5bc6bece.js" as="script"><link rel="preload" href="/markdown-note/assets/js/31.6b692b28.js" as="script"><link rel="prefetch" href="/markdown-note/assets/js/10.7e5ef7e5.js"><link rel="prefetch" href="/markdown-note/assets/js/11.301d9dda.js"><link rel="prefetch" href="/markdown-note/assets/js/12.c9b915b3.js"><link rel="prefetch" href="/markdown-note/assets/js/13.84c13ead.js"><link rel="prefetch" href="/markdown-note/assets/js/14.de9f92e2.js"><link rel="prefetch" href="/markdown-note/assets/js/15.8db858c1.js"><link rel="prefetch" href="/markdown-note/assets/js/16.f9ff9ab3.js"><link rel="prefetch" href="/markdown-note/assets/js/17.8259891a.js"><link rel="prefetch" href="/markdown-note/assets/js/18.c614dbf8.js"><link rel="prefetch" href="/markdown-note/assets/js/19.980ac3ed.js"><link rel="prefetch" href="/markdown-note/assets/js/20.8863a63e.js"><link rel="prefetch" href="/markdown-note/assets/js/21.57a11f23.js"><link rel="prefetch" href="/markdown-note/assets/js/22.03d39410.js"><link rel="prefetch" href="/markdown-note/assets/js/23.f0f8c921.js"><link rel="prefetch" href="/markdown-note/assets/js/24.537435dd.js"><link rel="prefetch" href="/markdown-note/assets/js/25.18df36c3.js"><link rel="prefetch" href="/markdown-note/assets/js/26.94fb784f.js"><link rel="prefetch" href="/markdown-note/assets/js/27.ff7e227a.js"><link rel="prefetch" href="/markdown-note/assets/js/28.880bf788.js"><link rel="prefetch" href="/markdown-note/assets/js/29.fe819911.js"><link rel="prefetch" href="/markdown-note/assets/js/3.2b4e5088.js"><link rel="prefetch" href="/markdown-note/assets/js/30.617b866c.js"><link rel="prefetch" href="/markdown-note/assets/js/32.da8d2239.js"><link rel="prefetch" href="/markdown-note/assets/js/33.6771918f.js"><link rel="prefetch" href="/markdown-note/assets/js/34.af108730.js"><link rel="prefetch" href="/markdown-note/assets/js/35.2acc9aee.js"><link rel="prefetch" href="/markdown-note/assets/js/36.0396717d.js"><link rel="prefetch" href="/markdown-note/assets/js/37.ce048f93.js"><link rel="prefetch" href="/markdown-note/assets/js/38.2b9b2368.js"><link rel="prefetch" href="/markdown-note/assets/js/39.fe09ad3c.js"><link rel="prefetch" href="/markdown-note/assets/js/4.b20bb83b.js"><link rel="prefetch" href="/markdown-note/assets/js/40.f1d7a1ea.js"><link rel="prefetch" href="/markdown-note/assets/js/41.5ddd0a5c.js"><link rel="prefetch" href="/markdown-note/assets/js/42.bebca75e.js"><link rel="prefetch" href="/markdown-note/assets/js/43.a400f188.js"><link rel="prefetch" href="/markdown-note/assets/js/44.f6a81e40.js"><link rel="prefetch" href="/markdown-note/assets/js/45.d3f587cd.js"><link rel="prefetch" href="/markdown-note/assets/js/46.9eba565c.js"><link rel="prefetch" href="/markdown-note/assets/js/47.0ec6dcc4.js"><link rel="prefetch" href="/markdown-note/assets/js/48.b6a57045.js"><link rel="prefetch" href="/markdown-note/assets/js/49.aada9f7d.js"><link rel="prefetch" href="/markdown-note/assets/js/5.ecff997d.js"><link rel="prefetch" href="/markdown-note/assets/js/50.a00306d8.js"><link rel="prefetch" href="/markdown-note/assets/js/51.913b147d.js"><link rel="prefetch" href="/markdown-note/assets/js/52.5bf18659.js"><link rel="prefetch" href="/markdown-note/assets/js/53.d13d2d5e.js"><link rel="prefetch" href="/markdown-note/assets/js/54.ccbd1361.js"><link rel="prefetch" href="/markdown-note/assets/js/55.9c0605ed.js"><link rel="prefetch" href="/markdown-note/assets/js/56.60b2ec97.js"><link rel="prefetch" href="/markdown-note/assets/js/57.9079f526.js"><link rel="prefetch" href="/markdown-note/assets/js/58.05e49f07.js"><link rel="prefetch" href="/markdown-note/assets/js/59.d67ff772.js"><link rel="prefetch" href="/markdown-note/assets/js/6.b1cd3e37.js"><link rel="prefetch" href="/markdown-note/assets/js/60.bc125d4b.js"><link rel="prefetch" href="/markdown-note/assets/js/61.bd66fbd8.js"><link rel="prefetch" href="/markdown-note/assets/js/62.8d572a3f.js"><link rel="prefetch" href="/markdown-note/assets/js/63.3e4901bd.js"><link rel="prefetch" href="/markdown-note/assets/js/64.2c4a1939.js"><link rel="prefetch" href="/markdown-note/assets/js/65.851998f4.js"><link rel="prefetch" href="/markdown-note/assets/js/66.5a5b57c3.js"><link rel="prefetch" href="/markdown-note/assets/js/67.edb6708e.js"><link rel="prefetch" href="/markdown-note/assets/js/68.ac17d7bd.js"><link rel="prefetch" href="/markdown-note/assets/js/69.a252ce8d.js"><link rel="prefetch" href="/markdown-note/assets/js/7.f3f49ad4.js"><link rel="prefetch" href="/markdown-note/assets/js/70.5f91924f.js"><link rel="prefetch" href="/markdown-note/assets/js/71.0d76d528.js"><link rel="prefetch" href="/markdown-note/assets/js/72.f74de48d.js"><link rel="prefetch" href="/markdown-note/assets/js/73.5cd271e6.js"><link rel="prefetch" href="/markdown-note/assets/js/74.f06cb058.js"><link rel="prefetch" href="/markdown-note/assets/js/75.ad72f980.js"><link rel="prefetch" href="/markdown-note/assets/js/76.73b2046c.js"><link rel="prefetch" href="/markdown-note/assets/js/77.0277ee94.js"><link rel="prefetch" href="/markdown-note/assets/js/78.617858d7.js"><link rel="prefetch" href="/markdown-note/assets/js/79.e76450e0.js"><link rel="prefetch" href="/markdown-note/assets/js/80.b26d2698.js"><link rel="prefetch" href="/markdown-note/assets/js/81.eea10a36.js"><link rel="prefetch" href="/markdown-note/assets/js/82.ee8110b7.js"><link rel="prefetch" href="/markdown-note/assets/js/83.3188d281.js"><link rel="prefetch" href="/markdown-note/assets/js/9.f19db848.js">
    <link rel="stylesheet" href="/markdown-note/assets/css/0.styles.9d4be43c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown-note/" class="home-link router-link-active"><!----> <span class="site-name">nanarino note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow down"></span></button> <button type="button" aria-label="about" class="mobile-dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow down"></span></button> <button type="button" aria-label="about" class="mobile-dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>起步</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数和作用域</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>对象和方法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>BOM和DOM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdown-note/js/18-DOM方法.html" class="sidebar-link">DOM方法</a></li><li><a href="/markdown-note/js/19-事件相关.html" class="sidebar-link">事件相关</a></li><li><a href="/markdown-note/js/20-BOM相关.html" class="sidebar-link">BOM相关</a></li><li><a href="/markdown-note/js/21-H5新增方法.html" class="active sidebar-link">H5新增方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#存储对象" class="sidebar-link">存储对象</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#hash路由" class="sidebar-link">hash路由</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#编码方式" class="sidebar-link">编码方式</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#自定义属性新规范" class="sidebar-link">自定义属性新规范</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#classlist对象" class="sidebar-link">classList对象</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#拖拽和文件对象" class="sidebar-link">拖拽和文件对象</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#formdata对象" class="sidebar-link">FormData对象</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#h5其他事件" class="sidebar-link">H5其他事件</a></li><li class="sidebar-sub-header"><a href="/markdown-note/js/21-H5新增方法.html#编辑命令" class="sidebar-link">编辑命令</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂项方法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WEB相关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="h5新增方法"><a href="#h5新增方法" class="header-anchor">#</a> H5新增方法</h1> <h2 id="存储对象"><a href="#存储对象" class="header-anchor">#</a> 存储对象</h2> <p>BOM提供了 <code>sessionStorage</code> （会话存储） 和 <code>localStorage</code>（本地存储）两个对象来对网页数据进行增删改查操作。前者的数据会在关闭窗口或标签页之后将会删除。</p> <table><thead><tr><th style="text-align:left;">方法</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">key(<em>n</em>)</td> <td style="text-align:left;">返回存储对象中第 <em>n</em> 个键的名称</td></tr> <tr><td style="text-align:left;">getItem(<em>keyname</em>)</td> <td style="text-align:left;">返回指定键的值</td></tr> <tr><td style="text-align:left;">setItem(<em>keyname</em>, <em>value</em>)</td> <td style="text-align:left;">添加键和值，如果对应的值存在，则更新该键对应的值。</td></tr> <tr><td style="text-align:left;">removeItem(<em>keyname</em>)</td> <td style="text-align:left;">移除键</td></tr> <tr><td style="text-align:left;">clear()</td> <td style="text-align:left;">清除存储对象中所有的键</td></tr></tbody></table> <p>注意，早在低版本IE中就已经支持存储对象，但是需要由http(s)协议打开的网页才能使用。</p> <h2 id="hash路由"><a href="#hash路由" class="header-anchor">#</a> hash路由</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//页面路由：会跳转到另外一个页面当中；</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;http://baidu.com&quot;</span>
<span class="token comment">//hash路由，不会使页面跳转，可以实现页面无刷的效果；</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token string">'#/home'</span>
<span class="token comment">//hashichange事件，监听hash路由的变化</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="编码方式"><a href="#编码方式" class="header-anchor">#</a> 编码方式</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//编码 str→uri</span>
<span class="token function">decodeURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//解码 uri→str</span>
<span class="token function">atob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//解码 base64→str</span>
<span class="token function">btoa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//编码 str→base64</span>
</code></pre></div><p>注意，<code>atob</code>和<code>btoa</code>是BOM方法，即<code>window.atob</code>和<code>window.btoa</code>，</p> <p>在<code>Node.js</code>环境中应该使用如下方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//编码 str→base64</span>
<span class="token comment">//旧方法 new Buffer(str).toString('base64')</span>
Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'base64'</span><span class="token punctuation">)</span>
<span class="token comment">//解码 base64→str</span>
<span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span>base64str<span class="token punctuation">,</span> <span class="token string">'base64'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="自定义属性新规范"><a href="#自定义属性新规范" class="header-anchor">#</a> 自定义属性新规范</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>box<span class="token punctuation">'</span></span> <span class="token attr-name">data-pf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>f<span class="token punctuation">'</span></span> <span class="token attr-name">pd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>d<span class="token punctuation">'</span></span> <span class="token attr-name">data-x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>h<span class="token punctuation">'</span></span> <span class="token attr-name">data-hans</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>hanS<span class="token punctuation">'</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">/*
        dataset : 数据集
            主要用于传输数据；
            拿取属性不区分大小写。
    */</span> 
    <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> box<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>pf <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> box<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>hans <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> box<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">&quot;hans&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> box<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
    <span class="token comment">// delete box.pd;</span>
    <span class="token comment">// console.log( box )</span>
    <span class="token comment">// box.removeAttribute('pd');</span>
    <span class="token comment">// box.removeAttribute('data-pf');</span>
    <span class="token comment">// console.log( box )</span>
    <span class="token keyword">delete</span> box<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'data-xiaohuihui'</span><span class="token punctuation">]</span>  <span class="token comment">//错误写法</span>
    <span class="token comment">// delete box.dataset['xiaohuihui']     //正确写法；</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="classlist对象"><a href="#classlist对象" class="header-anchor">#</a> classList对象</h2> <p>classList是一个DOM属性,它是一个记录类名以及相关方法的对象,类数组对象</p> <table><thead><tr><th style="text-align:left;">方法</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">add(<em>class1, class2, ...</em>)</td> <td style="text-align:left;">在元素中添加一个或多个类名。  如果指定的类名已存在，则不会添加</td></tr> <tr><td style="text-align:left;">contains(<em>class</em>)</td> <td style="text-align:left;">返回布尔值，判断指定的类名是否存在。</td></tr> <tr><td style="text-align:left;">item(<em>index</em>)</td> <td style="text-align:left;">返回元素中索引值对应的类名。索引值从 0 开始。  如果索引值在区间范围外则返回 <em>null</em></td></tr> <tr><td style="text-align:left;">remove(<em>class1, class2, ...</em>)</td> <td style="text-align:left;">移除元素中一个或多个类名。移除不存在的类名，不会报错。</td></tr> <tr><td style="text-align:left;">toggle(<em>class,</em> true|false)</td> <td style="text-align:left;">在元素中切换类名。  第一个参数为要在元素中移除的类名，并返回 false。  如果该类名不存在则会在元素中添加类名，并返回 true。 第二个是可选参数，是个布尔值用于设置元素是否强制添加或移除类，不管该类名是否存在。</td></tr></tbody></table> <h2 id="拖拽和文件对象"><a href="#拖拽和文件对象" class="header-anchor">#</a> 拖拽和文件对象</h2> <p>为了使元素可拖动，把<code>draggable</code>属性设置为 true ：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>拖拽事件需要阻止默认行为，否则可能是在新标签页显示。</p> <p>注意：火狐浏览器不能使用<code>on</code>拖拽的0级事件</p> <table><thead><tr><th>事件名称</th> <th>元素</th> <th>描述</th></tr></thead> <tbody><tr><td>dragstart</td> <td>被拖拽元素</td> <td>开始拖拽的一瞬间</td></tr> <tr><td>drag</td> <td>被拖拽元素</td> <td>正在拖拽</td></tr> <tr><td>dragend</td> <td>被拖拽元素</td> <td>结束拖拽</td></tr> <tr><td>dragenter</td> <td>目标元素</td> <td>被拖拽元素进入目标的一瞬间</td></tr> <tr><td>dragover</td> <td>目标元素</td> <td>被拖拽元素在目标元素上</td></tr> <tr><td>dragleave</td> <td>目标元素</td> <td>被拖拽元素离开目标</td></tr> <tr><td>drop</td> <td>目标元素</td> <td>结束拖拽，释放鼠标</td></tr></tbody></table> <p>进行拖拽的元素可以通过以下方法传递数据</p> <div class="language-js extra-class"><pre class="language-js"><code>e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span>
e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
</code></pre></div><p>拖拽的文件对象的获取</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//选中的多个文件组成的列表</span>
e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files
<span class="token comment">//单个</span>
e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">//或者</span>
e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</code></pre></div><p>拖拽的文件对象可以被<code>FileReader()</code>的实例对象以二进制读取到其<code>result</code>中</p> <p>将被拖拽的文件显示在页面中的示例：</p> <div class="language-js extra-class"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function-variable function">ondrop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1.file对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> file <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 创建文件读取对象</span>
  <span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 读取图片</span>
  f<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>文件对象<code>file</code>类是继承的<code>blob</code>类，故而以上代码可以使用h5的<code>blob</code>对象读取：</p> <div class="language-js extra-class"><pre class="language-js"><code>box<span class="token punctuation">.</span><span class="token function-variable function">ondrop</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> dt <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">;</span>
    <span class="token keyword">const</span> oFile <span class="token operator">=</span> dt<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//筛除非图片文件</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">image</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>oFile<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>oFile<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> oFile<span class="token punctuation">.</span>type<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> url <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            box<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> img <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过<code>blob</code>对象二度获取文本或者文件的base64形式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">base64</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">{</span>type<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//事实上e.target.result就是一个base64编码的二进制的URL</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;base64,</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="formdata对象"><a href="#formdata对象" class="header-anchor">#</a> FormData对象</h2> <p><code>FormData</code>对象可以调用它的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData/append" target="_blank" rel="noopener noreferrer"><code>append()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法来添加键名和键值。<br>
添加的键值可以是JavaScript原始数据类型，也可以是<code>blob</code>对象、 <code>file</code>对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;KOGAWA&quot;</span><span class="token punctuation">)</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">)</span>
</code></pre></div><p>需要注意的是：</p> <p>用<code>FormData</code>对象提交需要设置<code>'Content-Type':'multipart/form-data'</code></p> <p>如果使用<code>jQuery</code>来进行请求，在<code>$.ajax</code>中需要设置选项：</p> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>  
    data<span class="token operator">:</span> formData<span class="token punctuation">,</span>
    <span class="token operator">...</span>
    processData<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    contentType<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
</code></pre></div><h2 id="h5其他事件"><a href="#h5其他事件" class="header-anchor">#</a> H5其他事件</h2> <h3 id="监听网络状态"><a href="#监听网络状态" class="header-anchor">#</a> 监听网络状态</h3> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;有网&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;没有网&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="监听标签页状态"><a href="#监听标签页状态" class="header-anchor">#</a> 监听标签页状态</h3> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'visibilitychange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>visibilityState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>visibilityState <span class="token operator">===</span> <span class="token string">'hidden'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'崩溃了'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>visibilityState <span class="token operator">===</span> <span class="token string">'visible'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'又好了'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 1.hidden 当前网页的内容不可见</span>
    <span class="token comment">// 2.visible 当前网页可见</span>
    <span class="token comment">// 3.prerender 网页预渲染, 单内容不可见</span>
    <span class="token comment">// 4.unloaded 文档被卸载</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="获取电量状态"><a href="#获取电量状态" class="header-anchor">#</a> 获取电量状态</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 想要使用获取手机  window.navigator</span>
window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.是否正在充电</span>
    <span class="token comment">// 2.剩余电量 的半分比</span>
    <span class="token comment">// 3.充满电所需时间</span>
    <span class="token comment">// 4.当前电量可使用时间</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>charging<span class="token punctuation">,</span> level<span class="token punctuation">,</span> chargingTime<span class="token punctuation">,</span> dischargingTime<span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="编辑命令"><a href="#编辑命令" class="header-anchor">#</a> 编辑命令</h2> <p>类似于富文本编辑器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// iframe.document</span>
<span class="token keyword">const</span> doc <span class="token operator">=</span> iframe<span class="token punctuation">.</span>contentDocument<span class="token punctuation">;</span>
doc<span class="token punctuation">.</span>designMode <span class="token operator">=</span> <span class="token string">'on'</span><span class="token punctuation">;</span>
<span class="token comment">// 全选</span>
<span class="token comment">// 有一些执行命令首先需要document.designMode = 'on';才可以使用</span>
<span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'111.gif'</span><span class="token punctuation">;</span>
doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    doc<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'selectAll'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不需要开designMode</span>
    <span class="token comment">// document.execCommand('copy');  // 不需要开designMode</span>
    <span class="token comment">// document.execCommand('cut'); // 需要开designMode</span>
    <span class="token comment">// doc.execCommand('bold'); // 加粗 需要开designMode</span>
    <span class="token comment">// doc.execCommand('fontSize', true, 7); // 1-7文字大小 font标签 需要开designMode</span>
    <span class="token comment">// doc.execCommand('foreColor', true, '#963');</span>
    <span class="token comment">// doc.execCommand('backColor', true, '#9527');</span>
    <span class="token comment">// doc.execCommand('italic'); // 斜体</span>
    <span class="token comment">// document.execCommand('delete')</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/markdown-note/js/20-BOM相关.html" class="prev">
        BOM相关
      </a></span> <span class="next"><a href="/markdown-note/js/22-重新实现某些方法.html">
        重新实现某些方法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/markdown-note/assets/js/app.6b4725cf.js" defer></script><script src="/markdown-note/assets/js/8.ae913670.js" defer></script><script src="/markdown-note/assets/js/1.5bc6bece.js" defer></script><script src="/markdown-note/assets/js/31.6b692b28.js" defer></script>
  </body>
</html>
