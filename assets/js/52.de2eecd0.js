(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{262:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"日志处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志处理"}},[t._v("#")]),t._v(" 日志处理")]),t._v(" "),a("p",[t._v("日志可以使用内置的"),a("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/logging.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("logging")]),a("OutboundLink")],1),t._v("模块来生成"),a("br"),t._v("\n服务端的日志可以使用内置的"),a("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/sqlite3.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("sqlite3")]),a("OutboundLink")],1),t._v("模块来持久化。")]),t._v(" "),a("h2",{attrs:{id:"logging模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logging模块"}},[t._v("#")]),t._v(" logging模块")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" logging\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##级别依次提高")]),t._v("\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'排错信息'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'正常信息'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'警告信息'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'错误信息'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("critical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'严重错误信息'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("默认情况下Python的logging模块将日志打印到了标准输出（"),a("code",[t._v("sys.stdout")]),t._v("）中，"),a("br"),t._v("\n且只显示了大于等于WARNING级别的日志")]),t._v(" "),a("p",[t._v("默认的日志格式为    "),a("code",[t._v("日志级别：Logger名称：用户输出消息")]),t._v("。")]),t._v(" "),a("p",[t._v("它有两种配置方法")]),t._v(" "),a("ul",[a("li",[t._v("配置logging全局参数")]),t._v(" "),a("li",[t._v("显式地创建logger实例并配置")])]),t._v(" "),a("p",[t._v("也可以同时在两处配置，logger实例上的配置优先级更高。")]),t._v(" "),a("h3",{attrs:{id:"配置logging全局参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置logging全局参数"}},[t._v("#")]),t._v(" 配置logging全局参数")]),t._v(" "),a("p",[a("code",[t._v("basicConfig()")]),t._v("函数更改logging模块默认行为")]),t._v(" "),a("ul",[a("li",[t._v("缺点：低版本python里中文会乱码,不能同时控制台打印和写入文件")]),t._v(" "),a("li",[t._v("优点：灵活配置日志级别，日志格式，和输出位置")])]),t._v(" "),a("p",[t._v("简单的配置：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" logging  \nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("basicConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEBUG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n        datefmt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%a, %d %b %Y %H:%M:%S'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n        filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/tmp/test.log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n        filemode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'w'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n  \nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warning message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \nlogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("critical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'critical message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"更多的配置选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多的配置选项"}},[t._v("#")]),t._v(" 更多的配置选项")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("filename")]),t._v("：用指定的文件名创建FiledHandler，这样日志会被存储在指定的文件中。")]),t._v(" "),a("li",[a("code",[t._v("filemode")]),t._v("：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。")]),t._v(" "),a("li",[a("code",[t._v("format")]),t._v("：指定handler使用的日志显示格式。")]),t._v(" "),a("li",[a("code",[t._v("datefmt")]),t._v("：指定日期时间格式。")]),t._v(" "),a("li",[a("code",[t._v("level")]),t._v("：设置rootlogger的日志级别")]),t._v(" "),a("li",[a("code",[t._v("stream")]),t._v("：创建指定的StreamHandler。默认sys.stderr可选sys.stdout或者文件句柄")])]),t._v(" "),a("p",[t._v("若指定了"),a("code",[t._v("filename")]),t._v("，则"),a("code",[t._v("stream")]),t._v("参数会被忽略。")]),t._v(" "),a("h5",{attrs:{id:"format参数中可能用到的格式化串"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#format参数中可能用到的格式化串"}},[t._v("#")]),t._v(" format参数中可能用到的格式化串")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("格式化串")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("%(name)s")])]),t._v(" "),a("td",[t._v("Logger的名字")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(levelno)s")])]),t._v(" "),a("td",[t._v("数字形式的日志级别")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(levelname)s")])]),t._v(" "),a("td",[t._v("文本形式的日志级别")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(pathname)s")])]),t._v(" "),a("td",[t._v("调用日志输出函数的模块的完整路径名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(filename)s")])]),t._v(" "),a("td",[t._v("调用日志输出函数的模块的文件名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(module)s")])]),t._v(" "),a("td",[t._v("调用日志输出函数的模块名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(funcName)s")])]),t._v(" "),a("td",[t._v("调用日志输出函数的函数名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(lineno)d")])]),t._v(" "),a("td",[t._v("调用日志输出函数的语句所在的代码行")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(created)f")])]),t._v(" "),a("td",[t._v("当前时间，用UNIX标准的表示时间的浮点数表示")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(relativeCreated)d")])]),t._v(" "),a("td",[t._v("输出日志信息时的，自Logger创建以来的毫秒数")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(asctime)s")])]),t._v(" "),a("td",[t._v("字符串形式的当前时间。默认格式是“2003-07-08 16:49:45,896”")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(thread)d")])]),t._v(" "),a("td",[t._v("线程ID")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(threadName)s")])]),t._v(" "),a("td",[t._v("线程名")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(process)d")])]),t._v(" "),a("td",[t._v("进程ID")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("%(message)s")])]),t._v(" "),a("td",[t._v("用户输出的消息")])])])]),t._v(" "),a("h3",{attrs:{id:"配置logger实例参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置logger实例参数"}},[t._v("#")]),t._v(" 配置logger实例参数")]),t._v(" "),a("p",[a("code",[t._v("logging.getLogger()")]),t._v("实例化一个记录器对象")]),t._v(" "),a("p",[t._v("即使不实例化，也会默认创建"),a("code",[t._v("root logger")]),t._v("，缺省值读取"),a("code",[t._v("basicConfig()")]),t._v("的配置"),a("br"),t._v("\n记录器对象可以设置：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("logger.setLevel(logging.ERROR)")]),t._v("  设置日志级别为ERROR")]),t._v(" "),a("li",[a("code",[t._v("logger.addHandler(handler_name)")]),t._v("  为Logger实例增加一个处理器")]),t._v(" "),a("li",[a("code",[t._v("logger.removeHandler(handler_name)")]),t._v(" 为Logger实例删除一个处理器")])]),t._v(" "),a("p",[t._v("创建和添加处理器Handler")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" logging\nlogger "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getLogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于写入日志文件的handler")]),t._v("\nfh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FileHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于输出到控制台的handler")]),t._v("\nch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StreamHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#logger对象可以添加多个handler")]),t._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("处理器对象也可以设置：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ch.setLevel(logging.WARN)")]),t._v("  # 单对这个流设置日志级别")]),t._v(" "),a("li",[a("code",[t._v("ch.setFormatter(formatter_name)")]),t._v(" # 设置一个格式化器formatter")]),t._v(" "),a("li",[a("code",[t._v("ch.addFilter(filter_name)")]),t._v("  # 增加一个过滤器，可以增加多个")]),t._v(" "),a("li",[a("code",[t._v("ch.removeFilter(filter_name)")]),t._v("  # 删除一个过滤器")])]),t._v(" "),a("p",[t._v("创建格式化器：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("fh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FileHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \nformatter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Formatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%(asctime)s - %(name)s - %(levelname)s - %(message)s'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setFormatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("formatter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"sqlite3模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sqlite3模块"}},[t._v("#")]),t._v(" sqlite3模块")]),t._v(" "),a("p",[t._v("SQLite是一种嵌入式数据库，它的数据库就是一个文件。Python内置了SQLite3。")]),t._v(" "),a("h3",{attrs:{id:"基本用法示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本用法示例"}},[t._v("#")]),t._v(" 基本用法示例")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sqlite3\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建连接，如果文件不存在，会自动在当前目录创建:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" conn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sqlite3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.db'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建游标")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" cursor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cursor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行SQL语句，创建user表:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" cursor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('r"""CREATE TABLE "user" (\n\t\t\t\t\t\t"id" integer NOT NULL PRIMARY KEY AUTOINCREMENT,\n                    \t"name" varchar(20)\n                    );"""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("sqlite3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cursor "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),t._v(" at "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x10f8aa260")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 继续执行一条SQL语句，插入一条记录:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" cursor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('r"""INSERT INTO "main"."user"(name) VALUES (\'Michael\');"""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("sqlite3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cursor "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),t._v(" at "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x10f8aa260")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭游标")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" cursor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("close"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交事务")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭连接")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" conn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("close"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"游标对象常用属性和方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#游标对象常用属性和方法"}},[t._v("#")]),t._v(" 游标对象常用属性和方法")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("cursor.execute()")]),t._v("执行SQL语句并返回"),a("code",[t._v("cursor")]),t._v("对象本身")]),t._v(" "),a("li",[a("code",[t._v("cursor.rowcount")]),t._v("刚刚执行语句影响的行数")]),t._v(" "),a("li",[a("code",[t._v("cursor.fetchone()")]),t._v("弹出刚刚执行查询语句的结果集的第一条，元组")]),t._v(" "),a("li",[a("code",[t._v("cursor.fetchall()")]),t._v("刚刚执行查询语句的全部（剩余）结果集，列表嵌套元组")])]),t._v(" "),a("p",[t._v("直接遍历"),a("code",[t._v("cursor")]),t._v("对象本身也可以拿到（剩余）结果集")]),t._v(" "),a("p",[t._v("基本的sql语句和更多的数据库连接模块的用法在之后章节有介绍。")])])}),[],!1,null,null,null);s.default=e.exports}}]);