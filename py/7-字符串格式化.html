<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>字符串格式化</title>
    <meta name="description" content="">
    <link rel="shortcut icon" href="./favicon.ico">
    
    <link rel="preload" href="/markdown-note/assets/css/0.styles.bbfe0b79.css" as="style"><link rel="preload" href="/markdown-note/assets/js/app.a730857b.js" as="script"><link rel="preload" href="/markdown-note/assets/js/6.4d707832.js" as="script"><link rel="preload" href="/markdown-note/assets/js/1.19267a43.js" as="script"><link rel="preload" href="/markdown-note/assets/js/77.85c4a4ed.js" as="script"><link rel="prefetch" href="/markdown-note/assets/js/10.450906df.js"><link rel="prefetch" href="/markdown-note/assets/js/11.03a7ddb6.js"><link rel="prefetch" href="/markdown-note/assets/js/12.285e2227.js"><link rel="prefetch" href="/markdown-note/assets/js/13.97ba0a9a.js"><link rel="prefetch" href="/markdown-note/assets/js/14.ec3476fb.js"><link rel="prefetch" href="/markdown-note/assets/js/15.bbfd769a.js"><link rel="prefetch" href="/markdown-note/assets/js/16.579621fd.js"><link rel="prefetch" href="/markdown-note/assets/js/17.c9df6a57.js"><link rel="prefetch" href="/markdown-note/assets/js/18.5dfbe4e1.js"><link rel="prefetch" href="/markdown-note/assets/js/19.ebe955b7.js"><link rel="prefetch" href="/markdown-note/assets/js/20.defddc20.js"><link rel="prefetch" href="/markdown-note/assets/js/21.7d4d1fcf.js"><link rel="prefetch" href="/markdown-note/assets/js/22.2899262e.js"><link rel="prefetch" href="/markdown-note/assets/js/23.912e25d3.js"><link rel="prefetch" href="/markdown-note/assets/js/24.7c164a31.js"><link rel="prefetch" href="/markdown-note/assets/js/25.719e12c1.js"><link rel="prefetch" href="/markdown-note/assets/js/26.872fa261.js"><link rel="prefetch" href="/markdown-note/assets/js/27.f2e775cc.js"><link rel="prefetch" href="/markdown-note/assets/js/28.a459bb88.js"><link rel="prefetch" href="/markdown-note/assets/js/29.3a54dc76.js"><link rel="prefetch" href="/markdown-note/assets/js/3.ee307e01.js"><link rel="prefetch" href="/markdown-note/assets/js/30.dd3658bc.js"><link rel="prefetch" href="/markdown-note/assets/js/31.79702987.js"><link rel="prefetch" href="/markdown-note/assets/js/32.2e7dedd5.js"><link rel="prefetch" href="/markdown-note/assets/js/33.96b704bf.js"><link rel="prefetch" href="/markdown-note/assets/js/34.6a993818.js"><link rel="prefetch" href="/markdown-note/assets/js/35.20f1a93b.js"><link rel="prefetch" href="/markdown-note/assets/js/36.da9c6436.js"><link rel="prefetch" href="/markdown-note/assets/js/37.d549bbb2.js"><link rel="prefetch" href="/markdown-note/assets/js/38.32760f20.js"><link rel="prefetch" href="/markdown-note/assets/js/39.01a5e4c7.js"><link rel="prefetch" href="/markdown-note/assets/js/4.e5a448a1.js"><link rel="prefetch" href="/markdown-note/assets/js/40.3db3550a.js"><link rel="prefetch" href="/markdown-note/assets/js/41.eeab1495.js"><link rel="prefetch" href="/markdown-note/assets/js/42.cd0f2e3a.js"><link rel="prefetch" href="/markdown-note/assets/js/43.2dd76db4.js"><link rel="prefetch" href="/markdown-note/assets/js/44.c36f644e.js"><link rel="prefetch" href="/markdown-note/assets/js/45.d9ce19fc.js"><link rel="prefetch" href="/markdown-note/assets/js/46.70044768.js"><link rel="prefetch" href="/markdown-note/assets/js/47.8f8f07bc.js"><link rel="prefetch" href="/markdown-note/assets/js/48.a471ae00.js"><link rel="prefetch" href="/markdown-note/assets/js/49.399a9533.js"><link rel="prefetch" href="/markdown-note/assets/js/5.843fbad2.js"><link rel="prefetch" href="/markdown-note/assets/js/50.2cec459c.js"><link rel="prefetch" href="/markdown-note/assets/js/51.04ac969c.js"><link rel="prefetch" href="/markdown-note/assets/js/52.dd8e7b3c.js"><link rel="prefetch" href="/markdown-note/assets/js/53.5dcd3c45.js"><link rel="prefetch" href="/markdown-note/assets/js/54.7dafa28e.js"><link rel="prefetch" href="/markdown-note/assets/js/55.39aee5f1.js"><link rel="prefetch" href="/markdown-note/assets/js/56.2bad3fa8.js"><link rel="prefetch" href="/markdown-note/assets/js/57.c0b9b3f7.js"><link rel="prefetch" href="/markdown-note/assets/js/58.f7911fde.js"><link rel="prefetch" href="/markdown-note/assets/js/59.66850ea7.js"><link rel="prefetch" href="/markdown-note/assets/js/60.0cc12683.js"><link rel="prefetch" href="/markdown-note/assets/js/61.823dd71b.js"><link rel="prefetch" href="/markdown-note/assets/js/62.c778229e.js"><link rel="prefetch" href="/markdown-note/assets/js/63.9ed45b7d.js"><link rel="prefetch" href="/markdown-note/assets/js/64.837e466d.js"><link rel="prefetch" href="/markdown-note/assets/js/65.9ea5ad7a.js"><link rel="prefetch" href="/markdown-note/assets/js/66.d4981cb6.js"><link rel="prefetch" href="/markdown-note/assets/js/67.9b63aafc.js"><link rel="prefetch" href="/markdown-note/assets/js/68.eef5ae8b.js"><link rel="prefetch" href="/markdown-note/assets/js/69.bed8261f.js"><link rel="prefetch" href="/markdown-note/assets/js/7.d036849c.js"><link rel="prefetch" href="/markdown-note/assets/js/70.8811effb.js"><link rel="prefetch" href="/markdown-note/assets/js/71.ef4130a9.js"><link rel="prefetch" href="/markdown-note/assets/js/72.6781bfd3.js"><link rel="prefetch" href="/markdown-note/assets/js/73.c6de1c31.js"><link rel="prefetch" href="/markdown-note/assets/js/74.ec7c5d81.js"><link rel="prefetch" href="/markdown-note/assets/js/75.8d161c81.js"><link rel="prefetch" href="/markdown-note/assets/js/76.97a15235.js"><link rel="prefetch" href="/markdown-note/assets/js/78.92983aca.js"><link rel="prefetch" href="/markdown-note/assets/js/79.a2a42d7d.js"><link rel="prefetch" href="/markdown-note/assets/js/8.0a01bbb8.js"><link rel="prefetch" href="/markdown-note/assets/js/80.3d82ed7f.js"><link rel="prefetch" href="/markdown-note/assets/js/81.2dd53ef0.js"><link rel="prefetch" href="/markdown-note/assets/js/9.d5437aed.js">
    <link rel="stylesheet" href="/markdown-note/assets/css/0.styles.bbfe0b79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown-note/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>起步</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据类型</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdown-note/py/4-数字和字符串.html" class="sidebar-link">数字和字符串</a></li><li><a href="/markdown-note/py/5-列表和元组.html" class="sidebar-link">列表和元组</a></li><li><a href="/markdown-note/py/6-字典和集合.html" class="sidebar-link">字典和集合</a></li><li><a href="/markdown-note/py/7-字符串格式化.html" class="active sidebar-link">字符串格式化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown-note/py/7-字符串格式化.html#格式符" class="sidebar-link">%格式符</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/7-字符串格式化.html#终端字体颜色" class="sidebar-link">终端字体颜色</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/7-字符串格式化.html#内置函数format" class="sidebar-link">内置函数format()</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/7-字符串格式化.html#str-format" class="sidebar-link">str.format()</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/7-字符串格式化.html#f字符串" class="sidebar-link">f字符串</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/7-字符串格式化.html#内置函数str-和repr" class="sidebar-link">内置函数str()和repr()</a></li></ul></li><li><a href="/markdown-note/py/8-三目和推导式.html" class="sidebar-link">三目和推导式</a></li><li><a href="/markdown-note/py/9-数据类型拓展.html" class="sidebar-link">数据类型拓展</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面向对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WEB相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂项模块</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="字符串格式化"><a href="#字符串格式化" class="header-anchor">#</a> 字符串格式化</h1> <p>Python的字符串格式化有两种方式</p> <ul><li>%格式符方式</li> <li>format方式</li></ul> <p>事实上，格式化借助的是对象的魔术方法。<br>
实现了<code>__format__</code>的对象才适用于format方式格式化输出，<br>
实现了<code>__str__</code>，<code>__repr__</code>的对象才分别适用于格式符<code>%s</code>和<code>%r</code>输出。<br>
在面向对象章节有给对象定义魔术方法的示例。</p> <h2 id="格式符"><a href="#格式符" class="header-anchor">#</a> <code>%</code>格式符</h2> <p>一般格式为	<code>%(name)</code> +  <a href="https://docs.python.org/zh-cn/3/library/string.html#formatspec" target="_blank" rel="noopener noreferrer">format_spec<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- extra-class"><pre class="language-text"><code>[[fill]align][sign][#][0][width][grouping_option][.precision][type]
</code></pre></div><h3 id="name"><a href="#name" class="header-anchor">#</a> name</h3> <p>可选，用于选择指定的key</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">&quot;%(name)s——%(age)d&quot;</span><span class="token operator">%</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'宝钟玛琳'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">:</span><span class="token number">17</span><span class="token punctuation">}</span>
<span class="token string">'宝钟玛琳——17'</span>
</code></pre></div><p>s 和 d 属于 [<code>type</code>]</p> <p>format_spec规则的常用组分：</p> <h3 id="sign"><a href="#sign" class="header-anchor">#</a> sign</h3> <p>可选，数字和字符串可供选择的值有：</p> <ul><li><code>+</code>       右对齐；正数负数前加正负号</li> <li><code>-</code>        左对齐；负数前加负号</li> <li>空格    右对齐；负数前加负号</li> <li><code>0</code>        右对齐；正数前无符号，负数前加负号；用0填充空白处</li></ul> <h3 id="width"><a href="#width" class="header-anchor">#</a> width</h3> <p>可选，占有宽度</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">&quot;%(name)+7s——%(age)-5d&quot;</span><span class="token operator">%</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'宝钟玛琳'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">:</span><span class="token number">17</span><span class="token punctuation">}</span>
<span class="token string">'   宝钟玛琳——17   '</span>
</code></pre></div><h3 id="precision"><a href="#precision" class="header-anchor">#</a> .precision</h3> <p>可选，小数点后保留的位数 默认6位</p> <h3 id="type"><a href="#type" class="header-anchor">#</a> type</h3> <p>类型，必选</p> <p>任意对象：</p> <ul><li><p><code>%s</code>    字符串 (采用<code>str()</code>的显示)</p></li> <li><p><code>%r</code>    字符串 (采用<code>repr()</code>的显示)</p></li> <li><p><code>%c</code>    单个字符</p></li></ul> <p>字符串和整数：</p> <ul><li><code>%b</code>    二进制整数</li> <li><code>%%</code>    字符&quot;%&quot;转义</li></ul> <p>数字：</p> <ul><li><code>%d</code>    十进制整数</li> <li><code>%i</code>    十进制整数</li> <li><code>%o</code>    八进制整数</li> <li><code>%x</code>    十六进制整数</li> <li><code>%e</code>    指数 (基底写为e)</li> <li><code>%E</code>    指数 (基底写为E)</li> <li><code>%f</code>    浮点数</li> <li><code>%F</code>    浮点数，与上相同</li> <li><code>%g</code>    科学计数法(e)或浮点数 (根据显示长度)</li> <li><code>%G</code>    科学计数法(E)或浮点数 (根据显示长度)</li> <li><code>%%</code>    字符&quot;%&quot;</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'——%(p).2f'</span><span class="token operator">%</span><span class="token punctuation">{</span><span class="token string">'p'</span><span class="token punctuation">:</span><span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span><span class="token punctuation">}</span>
<span class="token string">'——0.30'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'——%(p).2g'</span><span class="token operator">%</span><span class="token punctuation">{</span><span class="token string">'p'</span><span class="token punctuation">:</span><span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span><span class="token punctuation">}</span>
<span class="token string">'——0.3'</span>
</code></pre></div><h2 id="终端字体颜色"><a href="#终端字体颜色" class="header-anchor">#</a> 终端字体颜色</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
#格式：
　　设置颜色开始 ：\033[显示方式;前景色;背景色m
　　
#说明：
前景色            背景色           颜色
---------------------------------------
30                40              黑色
31                41              红色
32                42              绿色
33                43              黃色
34                44              蓝色
35                45              紫红色
36                46              青蓝色
37                47              白色

显示方式           意义
-------------------------
0                终端默认设置
1                高亮显示
4                使用下划线
5                闪烁
7                反白显示
8                不可见
&quot;&quot;&quot;</span>

<span class="token comment">#例子：</span>
\<span class="token number">033</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token number">31</span><span class="token punctuation">;</span>40m    <span class="token comment">#1-高亮显示 31-前景色红色  40-背景色黑色</span>
\<span class="token number">033</span><span class="token punctuation">[</span>0m          <span class="token comment">#采用终端默认设置，即取消颜色设置</span>
</code></pre></div><p>可以使用第三方模块termcolor来简化语句：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> termcolor <span class="token keyword">import</span> colored

<span class="token keyword">print</span><span class="token punctuation">(</span>colored<span class="token punctuation">(</span><span class="token string">&quot;helloworld&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>第三方模块在使用前需要用pip安装</p> <div class="custom-block warning"><p class="custom-block-title">系统支持</p> <p>Windows7及以下无法解析颜色代码<br>
使用termcolor模块也无效<br>
可以使用第三方模块colorama来显示颜色</p></div> <p>colorama模块兼容更好：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> colorama <span class="token keyword">import</span>  init<span class="token punctuation">,</span> Fore

init<span class="token punctuation">(</span>autoreset<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment">#给True的时候print时无需+Fore.RESET</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Fore<span class="token punctuation">.</span>RED <span class="token operator">+</span> <span class="token string">&quot;helloworld&quot;</span> <span class="token operator">+</span> Fore<span class="token punctuation">.</span>RESET<span class="token punctuation">)</span>
</code></pre></div><h2 id="内置函数format"><a href="#内置函数format" class="header-anchor">#</a> 内置函数<code>format()</code></h2> <p>内置函数<code>format</code>(<em>value</em>[, <em>format_spec</em>])<br>
第二个参数即format_spec格式规格迷你语言<br>
实现了魔术方法<code>__format__</code>的对象都可以使用</p> <p>以数字对象的格式化为例：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'+.3f'</span><span class="token punctuation">)</span> <span class="token comment">#保留3位小数</span>
<span class="token string">'+12.000'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span> <span class="token comment">#二进制转化</span>
<span class="token string">'11'</span>
</code></pre></div><p>其他实现了魔术方法<code>__format__</code>的对象，这里以<code>datetime.time</code>对象为例：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> night <span class="token operator">=</span> datetime<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span>tzinfo<span class="token operator">=</span>datetime<span class="token punctuation">.</span>timezone<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'北京'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">format</span><span class="token punctuation">(</span>night<span class="token punctuation">,</span><span class="token string">'现在是%Z时间%H点%M分'</span><span class="token punctuation">)</span>
<span class="token string">'现在是北京时间22点30分'</span>
</code></pre></div><p><code>datetime</code>模块后续会介绍。</p> <h2 id="str-format"><a href="#str-format" class="header-anchor">#</a> <code>str.format()</code></h2> <p>涉及到函数的传参方式，将在后面章节介绍。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token string">' {}  {}  {} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>     
<span class="token string">' {0}  {1}  {2} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
<span class="token string">' {0}  {1}  {2} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token string">' {a}  {b}  {c} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>a<span class="token operator">=</span>a<span class="token punctuation">,</span>b<span class="token operator">=</span>b<span class="token punctuation">,</span>c<span class="token operator">=</span>c<span class="token punctuation">)</span>
<span class="token string">' {a}  {b}  {c} '</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token operator">**</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span>a<span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span>b<span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">:</span>c<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>{!s}</code>是默认的</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token string">'{!s}、{!a}、{!r}'</span> <span class="token comment">#分别表示str、ascii和repr方法。</span>
</code></pre></div><p>实现了魔术方法<code>__format__</code>的对象可以使用冒号 <code>: format_spec</code></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'0x{:x}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token string">'0xff'</span>
</code></pre></div><p>以<code>datetime.time</code>对象为例的其他实现了魔术方法<code>__format__</code>的对象：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'现在是{:%Z}时间{:%H}点{:%M}分'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>night<span class="token punctuation">,</span>night<span class="token punctuation">,</span>night<span class="token punctuation">)</span>
<span class="token string">'现在是北京时间22点30分'</span>
</code></pre></div><p>转义：<code>{{</code>    ,    <code>}}</code>    可以不解析花括号</p> <h2 id="f字符串"><a href="#f字符串" class="header-anchor">#</a> f字符串</h2> <p>在python3.6以上，<code>str.format()</code>可以直接使用<strong>f字符串</strong>的写法<br>
用<code>f'{a}{b}{c}'</code>即可代替<code>'{a}{b}{c}'.format(a=a,b=b,c=c)</code>。<br>
f字符串中不允许使用<code>\</code>转义字符。</p> <p>与<code>%</code>格式符的不同：<br>
Sign对齐使用<code>&lt;</code>，<code>&gt;</code> 和 <code>^</code>  而不是 <code>+</code> 和 <code>-</code></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'%-6d000'</span><span class="token operator">%</span><span class="token number">233</span>
<span class="token number">233</span>   <span class="token number">000</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token number">233</span><span class="token punctuation">:</span><span class="token format-spec">&lt;6d</span><span class="token punctuation">}</span></span><span class="token string">000'</span></span>
<span class="token number">233</span>   <span class="token number">000</span>
</code></pre></div><p>以<code>datetime.time</code>对象为例的其他实现了魔术方法<code>__format__</code>的对象：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string-interpolation"><span class="token string">f'现在是</span><span class="token interpolation"><span class="token punctuation">{</span>night<span class="token punctuation">:</span><span class="token format-spec">%Z</span><span class="token punctuation">}</span></span><span class="token string">时间</span><span class="token interpolation"><span class="token punctuation">{</span>night<span class="token punctuation">:</span><span class="token format-spec">%H</span><span class="token punctuation">}</span></span><span class="token string">点</span><span class="token interpolation"><span class="token punctuation">{</span>night<span class="token punctuation">:</span><span class="token format-spec">%M</span><span class="token punctuation">}</span></span><span class="token string">分'</span></span>
<span class="token string">'现在是北京时间22点30分'</span>
</code></pre></div><p>在python3.8以上</p> <p>f字符串中可以直接使用说明符<code>=</code>调试，</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> python <span class="token operator">=</span> <span class="token number">3.8</span>	
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>python<span class="token operator">=</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>	
<span class="token string">'python=3.8'</span>
</code></pre></div><h2 id="内置函数str-和repr"><a href="#内置函数str-和repr" class="header-anchor">#</a> 内置函数<code>str()</code>和<code>repr()</code></h2> <p><code>str()</code>不止是构造函数（<code>class</code>）实例化一个<code>str</code>对象，<br> <code>str(o)</code>它也是对参数对象进行魔术方法的调用：<code>o.__str__()</code>，将参数转换为了<code>str</code>对象<br>
无论是<code>print(o)</code>，<code>f'{o}'</code>,  <code>&quot;%s&quot;%o</code>，它们都是对魔术方法 <code>o.__str__()</code>的调用</p> <hr> <p>而<code>repr(o)</code>，<code>f'{o!r}'</code>,  <code>&quot;%r&quot;%o</code>则是对魔术方法 <code>o.__repr__()</code>的调用，<br>
它会以字面量的形式呈现对象，即字符串带有引号，列表变成<code>'['+ repr(成员) + ',]'</code><br> <strong>f字符串</strong>中<code>f'{o=}'</code>就相当于<code>f'o={repr(o)}'</code></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/markdown-note/py/6-字典和集合.html" class="prev">字典和集合</a></span> <span class="next"><a href="/markdown-note/py/8-三目和推导式.html">三目和推导式</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/markdown-note/assets/js/app.a730857b.js" defer></script><script src="/markdown-note/assets/js/6.4d707832.js" defer></script><script src="/markdown-note/assets/js/1.19267a43.js" defer></script><script src="/markdown-note/assets/js/77.85c4a4ed.js" defer></script>
  </body>
</html>
