<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>时间有关模块</title>
    <meta name="description" content="">
    <link rel="shortcut icon" href="./favicon.ico">
    
    <link rel="preload" href="/markdown-note/assets/css/0.styles.bbfe0b79.css" as="style"><link rel="preload" href="/markdown-note/assets/js/app.a730857b.js" as="script"><link rel="preload" href="/markdown-note/assets/js/6.4d707832.js" as="script"><link rel="preload" href="/markdown-note/assets/js/1.19267a43.js" as="script"><link rel="preload" href="/markdown-note/assets/js/10.450906df.js" as="script"><link rel="prefetch" href="/markdown-note/assets/js/11.03a7ddb6.js"><link rel="prefetch" href="/markdown-note/assets/js/12.285e2227.js"><link rel="prefetch" href="/markdown-note/assets/js/13.97ba0a9a.js"><link rel="prefetch" href="/markdown-note/assets/js/14.ec3476fb.js"><link rel="prefetch" href="/markdown-note/assets/js/15.bbfd769a.js"><link rel="prefetch" href="/markdown-note/assets/js/16.579621fd.js"><link rel="prefetch" href="/markdown-note/assets/js/17.c9df6a57.js"><link rel="prefetch" href="/markdown-note/assets/js/18.5dfbe4e1.js"><link rel="prefetch" href="/markdown-note/assets/js/19.ebe955b7.js"><link rel="prefetch" href="/markdown-note/assets/js/20.defddc20.js"><link rel="prefetch" href="/markdown-note/assets/js/21.7d4d1fcf.js"><link rel="prefetch" href="/markdown-note/assets/js/22.2899262e.js"><link rel="prefetch" href="/markdown-note/assets/js/23.912e25d3.js"><link rel="prefetch" href="/markdown-note/assets/js/24.7c164a31.js"><link rel="prefetch" href="/markdown-note/assets/js/25.719e12c1.js"><link rel="prefetch" href="/markdown-note/assets/js/26.872fa261.js"><link rel="prefetch" href="/markdown-note/assets/js/27.f2e775cc.js"><link rel="prefetch" href="/markdown-note/assets/js/28.a459bb88.js"><link rel="prefetch" href="/markdown-note/assets/js/29.3a54dc76.js"><link rel="prefetch" href="/markdown-note/assets/js/3.ee307e01.js"><link rel="prefetch" href="/markdown-note/assets/js/30.dd3658bc.js"><link rel="prefetch" href="/markdown-note/assets/js/31.79702987.js"><link rel="prefetch" href="/markdown-note/assets/js/32.2e7dedd5.js"><link rel="prefetch" href="/markdown-note/assets/js/33.96b704bf.js"><link rel="prefetch" href="/markdown-note/assets/js/34.6a993818.js"><link rel="prefetch" href="/markdown-note/assets/js/35.20f1a93b.js"><link rel="prefetch" href="/markdown-note/assets/js/36.da9c6436.js"><link rel="prefetch" href="/markdown-note/assets/js/37.d549bbb2.js"><link rel="prefetch" href="/markdown-note/assets/js/38.32760f20.js"><link rel="prefetch" href="/markdown-note/assets/js/39.01a5e4c7.js"><link rel="prefetch" href="/markdown-note/assets/js/4.e5a448a1.js"><link rel="prefetch" href="/markdown-note/assets/js/40.3db3550a.js"><link rel="prefetch" href="/markdown-note/assets/js/41.eeab1495.js"><link rel="prefetch" href="/markdown-note/assets/js/42.cd0f2e3a.js"><link rel="prefetch" href="/markdown-note/assets/js/43.2dd76db4.js"><link rel="prefetch" href="/markdown-note/assets/js/44.c36f644e.js"><link rel="prefetch" href="/markdown-note/assets/js/45.d9ce19fc.js"><link rel="prefetch" href="/markdown-note/assets/js/46.70044768.js"><link rel="prefetch" href="/markdown-note/assets/js/47.8f8f07bc.js"><link rel="prefetch" href="/markdown-note/assets/js/48.a471ae00.js"><link rel="prefetch" href="/markdown-note/assets/js/49.399a9533.js"><link rel="prefetch" href="/markdown-note/assets/js/5.843fbad2.js"><link rel="prefetch" href="/markdown-note/assets/js/50.2cec459c.js"><link rel="prefetch" href="/markdown-note/assets/js/51.04ac969c.js"><link rel="prefetch" href="/markdown-note/assets/js/52.dd8e7b3c.js"><link rel="prefetch" href="/markdown-note/assets/js/53.5dcd3c45.js"><link rel="prefetch" href="/markdown-note/assets/js/54.7dafa28e.js"><link rel="prefetch" href="/markdown-note/assets/js/55.39aee5f1.js"><link rel="prefetch" href="/markdown-note/assets/js/56.2bad3fa8.js"><link rel="prefetch" href="/markdown-note/assets/js/57.c0b9b3f7.js"><link rel="prefetch" href="/markdown-note/assets/js/58.f7911fde.js"><link rel="prefetch" href="/markdown-note/assets/js/59.66850ea7.js"><link rel="prefetch" href="/markdown-note/assets/js/60.0cc12683.js"><link rel="prefetch" href="/markdown-note/assets/js/61.823dd71b.js"><link rel="prefetch" href="/markdown-note/assets/js/62.c778229e.js"><link rel="prefetch" href="/markdown-note/assets/js/63.9ed45b7d.js"><link rel="prefetch" href="/markdown-note/assets/js/64.837e466d.js"><link rel="prefetch" href="/markdown-note/assets/js/65.9ea5ad7a.js"><link rel="prefetch" href="/markdown-note/assets/js/66.d4981cb6.js"><link rel="prefetch" href="/markdown-note/assets/js/67.9b63aafc.js"><link rel="prefetch" href="/markdown-note/assets/js/68.eef5ae8b.js"><link rel="prefetch" href="/markdown-note/assets/js/69.bed8261f.js"><link rel="prefetch" href="/markdown-note/assets/js/7.d036849c.js"><link rel="prefetch" href="/markdown-note/assets/js/70.8811effb.js"><link rel="prefetch" href="/markdown-note/assets/js/71.ef4130a9.js"><link rel="prefetch" href="/markdown-note/assets/js/72.6781bfd3.js"><link rel="prefetch" href="/markdown-note/assets/js/73.c6de1c31.js"><link rel="prefetch" href="/markdown-note/assets/js/74.ec7c5d81.js"><link rel="prefetch" href="/markdown-note/assets/js/75.8d161c81.js"><link rel="prefetch" href="/markdown-note/assets/js/76.97a15235.js"><link rel="prefetch" href="/markdown-note/assets/js/77.85c4a4ed.js"><link rel="prefetch" href="/markdown-note/assets/js/78.92983aca.js"><link rel="prefetch" href="/markdown-note/assets/js/79.a2a42d7d.js"><link rel="prefetch" href="/markdown-note/assets/js/8.0a01bbb8.js"><link rel="prefetch" href="/markdown-note/assets/js/80.3d82ed7f.js"><link rel="prefetch" href="/markdown-note/assets/js/81.2dd53ef0.js"><link rel="prefetch" href="/markdown-note/assets/js/9.d5437aed.js">
    <link rel="stylesheet" href="/markdown-note/assets/css/0.styles.bbfe0b79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/markdown-note/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/markdown-note/js/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/markdown-note/py/" class="nav-link router-link-active">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="about" class="dropdown-title"><span class="title">about</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/nanarino" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/kogawananari" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>起步</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面向对象</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>常用模块</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdown-note/py/20-加密有关模块.html" class="sidebar-link">加密有关模块</a></li><li><a href="/markdown-note/py/21-序列化有关模块.html" class="sidebar-link">序列化有关模块</a></li><li><a href="/markdown-note/py/22-正则有关模块.html" class="sidebar-link">正则有关模块</a></li><li><a href="/markdown-note/py/23-时间有关模块.html" class="active sidebar-link">时间有关模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown-note/py/23-时间有关模块.html#timeit模块" class="sidebar-link">timeit模块</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/23-时间有关模块.html#time模块" class="sidebar-link">time模块</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/23-时间有关模块.html#calendar模块" class="sidebar-link">calendar模块</a></li><li class="sidebar-sub-header"><a href="/markdown-note/py/23-时间有关模块.html#datetime模块" class="sidebar-link">datetime模块</a></li></ul></li><li><a href="/markdown-note/py/24-数学有关模块.html" class="sidebar-link">数学有关模块</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WEB相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂项模块</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="时间有关模块"><a href="#时间有关模块" class="header-anchor">#</a> 时间有关模块</h1> <h2 id="timeit模块"><a href="#timeit模块" class="header-anchor">#</a> timeit模块</h2> <p><a href="https://docs.python.org/zh-cn/3/library/timeit.html" target="_blank" rel="noopener noreferrer"><code>timeit</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>模块提供简单的方法来计算一小段 Python 代码的耗时。简单使用如下</p> <p><code>timeit.timeit(eval/lambda, number=10000)</code>    运行10000次中的最快用时</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">import</span> timeit
<span class="token keyword">print</span><span class="token punctuation">(</span>timeit<span class="token punctuation">.</span>timeit<span class="token punctuation">(</span><span class="token string">'test()'</span><span class="token punctuation">,</span> <span class="token builtin">globals</span><span class="token operator">=</span><span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="time模块"><a href="#time模块" class="header-anchor">#</a> time模块</h2> <p><a href="https://docs.python.org/zh-cn/3/library/time.html" target="_blank" rel="noopener noreferrer"><code>time</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>模块提供了各种时间相关的底层函数。最常用方法有：</p> <ul><li><code>time.sleep()</code>    线程睡眠，接收浮点秒数。</li> <li><code>time.time()</code>    戳一个时间。</li></ul> <h3 id="格式转换"><a href="#格式转换" class="header-anchor">#</a> 格式转换</h3> <p>在Python中，通常有这三种方式来表示时间</p> <ul><li>时间元组(struct_time)</li> <li>时间戳(timestamp)</li> <li>格式化时间(Format String)</li></ul> <h4 id="timestamp"><a href="#timestamp" class="header-anchor">#</a> timestamp</h4> <p>形如：<code>1588218207.4545252</code></p> <p>通常来说，时间戳表示的是从1970年1月1日00:00:00开始按秒计算的偏移量。</p> <p>我们运行<code>time.time()</code>，返回的是当前时间戳，是float类型。</p> <h4 id="format-string"><a href="#format-string" class="header-anchor">#</a> Format String</h4> <p>形如：<code>'2017-07-24 13:54:37'</code></p> <p>运行<code>time.strftime(&quot;%Y-%m-%d %H-%M-%S&quot;)</code>，返回当前格式化时间，参数中它支持以下指令</p> <table><thead><tr><th style="text-align:left;">指令</th> <th style="text-align:left;">意义</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>%a</code></td> <td style="text-align:left;">本地化的缩写星期中每日的名称。</td></tr> <tr><td style="text-align:left;"><code>%A</code></td> <td style="text-align:left;">本地化的星期中每日的完整名称。</td></tr> <tr><td style="text-align:left;"><code>%b</code></td> <td style="text-align:left;">本地化的月缩写名称。</td></tr> <tr><td style="text-align:left;"><code>%B</code></td> <td style="text-align:left;">本地化的月完整名称。</td></tr> <tr><td style="text-align:left;"><code>%c</code></td> <td style="text-align:left;">本地化的适当日期和时间表示。</td></tr> <tr><td style="text-align:left;"><code>%d</code></td> <td style="text-align:left;">十进制数 [01,31] 表示的月中日。</td></tr> <tr><td style="text-align:left;"><code>%H</code></td> <td style="text-align:left;">十进制数 [00,23] 表示的小时（24小时制）。</td></tr> <tr><td style="text-align:left;"><code>%I</code></td> <td style="text-align:left;">十进制数 [01,12] 表示的小时（12小时制）。</td></tr> <tr><td style="text-align:left;"><code>%j</code></td> <td style="text-align:left;">十进制数 [001,366] 表示的年中日。</td></tr> <tr><td style="text-align:left;"><code>%m</code></td> <td style="text-align:left;">十进制数 [01,12] 表示的月。</td></tr> <tr><td style="text-align:left;"><code>%M</code></td> <td style="text-align:left;">十进制数 [00,59] 表示的分钟。</td></tr> <tr><td style="text-align:left;"><code>%p</code></td> <td style="text-align:left;">本地化的 AM 或 PM 。</td></tr> <tr><td style="text-align:left;"><code>%S</code></td> <td style="text-align:left;">十进制数 [00,61] 表示的秒。</td></tr> <tr><td style="text-align:left;"><code>%U</code></td> <td style="text-align:left;">十进制数 [00,53] 表示的一年中的周数（星期日作为一周的第一天）。在第一个星期日之前的新年中的所有日子都被认为是在第0周。</td></tr> <tr><td style="text-align:left;"><code>%w</code></td> <td style="text-align:left;">十进制数 [0(<strong>星期日</strong>),6] 表示的周中日。</td></tr> <tr><td style="text-align:left;"><code>%W</code></td> <td style="text-align:left;">十进制数 [00,53] 表示的一年中的周数（星期一作为一周的第一天）。在第一个星期一之前的新年中的所有日子被认为是在第0周。</td></tr> <tr><td style="text-align:left;"><code>%x</code></td> <td style="text-align:left;">本地化的适当日期表示。</td></tr> <tr><td style="text-align:left;"><code>%X</code></td> <td style="text-align:left;">本地化的适当时间表示。</td></tr> <tr><td style="text-align:left;"><code>%y</code></td> <td style="text-align:left;">十进制数 [00,99] 表示的没有世纪的年份。</td></tr> <tr><td style="text-align:left;"><code>%Y</code></td> <td style="text-align:left;">十进制数表示的带世纪的年份。</td></tr> <tr><td style="text-align:left;"><code>%z</code></td> <td style="text-align:left;">时区偏移以格式 +HHMM 或 -HHMM 形式的 UTC/GMT 的正或负时差指示，其中H表示十进制小时数字，M表示小数分钟数字 [-23:59, +23:59] 。</td></tr> <tr><td style="text-align:left;"><code>%Z</code></td> <td style="text-align:left;">时区名称（如果不存在时区，则不包含字符）。</td></tr> <tr><td style="text-align:left;"><code>%%</code></td> <td style="text-align:left;">字面的 <code>'%'</code> 字符。</td></tr></tbody></table> <h4 id="struct-time"><a href="#struct-time" class="header-anchor">#</a> struct_time</h4> <p>struct_time元组共有9个元素共九个元素:(年，月，日，时，分，秒，一年中第几周，一年中第几天等）</p> <table><thead><tr><th>索引（Index）</th> <th>属性（Attribute）</th> <th>值（Values）</th></tr></thead> <tbody><tr><td>.</td> <td>tm_zone</td> <td>时区名称的缩写</td></tr> <tr><td>.</td> <td>tm_gmtoff</td> <td>以秒为单位的UTC以东偏离</td></tr> <tr><td>0</td> <td>tm_year（年）</td> <td>比如2011</td></tr> <tr><td>1</td> <td>tm_mon（月）</td> <td>1 - 12</td></tr> <tr><td>2</td> <td>tm_mday（日）</td> <td>1 - 31</td></tr> <tr><td>3</td> <td>tm_hour（时）</td> <td>0 - 23</td></tr> <tr><td>4</td> <td>tm_min（分）</td> <td>0 - 59</td></tr> <tr><td>5</td> <td>tm_sec（秒）</td> <td>0 - 61</td></tr> <tr><td>6</td> <td>tm_wday（星期几）</td> <td>0 - 6    (星期一是0依次)</td></tr> <tr><td>7</td> <td>tm_yday（一年中的第几天）</td> <td>1 - 366</td></tr> <tr><td>8</td> <td>tm_isdst（是否是夏令时）</td> <td>默认为0</td></tr></tbody></table> <h4 id="当前时间的三种格式"><a href="#当前时间的三种格式" class="header-anchor">#</a> 当前时间的三种格式</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#导入时间模块</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token keyword">import</span> time

<span class="token comment">#时间戳</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">1500875844.800804</span>

<span class="token comment">#时间字符串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %X&quot;</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-24 13:54:37'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %H-%M-%S&quot;</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-24 13-55-04'</span>

<span class="token comment">#时间元组</span>
<span class="token comment">#localtime将一个时间戳转换为当前时区的struct_time</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span>
　　　　　　　　　　tm_hour<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span> tm_min<span class="token operator">=</span><span class="token number">59</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">37</span><span class="token punctuation">,</span> 
                 tm_wday<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">205</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="三种格式的转换"><a href="#三种格式的转换" class="header-anchor">#</a> 三种格式的转换</h4> <p><img src="/markdown-note/assets/img/time1.7313a12b.jpg" alt="img"></p> <h5 id="timestamp-⇄-struct-time"><a href="#timestamp-⇄-struct-time" class="header-anchor">#</a> timestamp  ⇄ struct_time</h5> <ul><li><code>time.gmtime(timestamp) -&gt; struct_time</code></li> <li><code>time.localtime(timestamp) -&gt; struct_time</code></li> <li><code>time.mktime(struct_time) -&gt; timestamp</code></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#UTC时间。与英国伦敦当地时间一致</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>gmtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">,</span> tm_hour<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>
                 tm_min<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_wday<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">195</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">#当地时间。北京与UTC时间相差+8小时</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">,</span> tm_hour<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
                 tm_min<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_wday<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">195</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#与time.localtime相反效果</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time_tuple <span class="token operator">=</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>time_tuple<span class="token punctuation">)</span>
<span class="token number">1500000000.0</span>
</code></pre></div><h5 id="struct-time-⇄-format-string"><a href="#struct-time-⇄-format-string" class="header-anchor">#</a> struct_time ⇄ Format String</h5> <ul><li><code>time.strftime(模板字符串, struct_time=当前) -&gt; FormatString</code></li> <li><code>time.strptime(FormatString, 模板字符串) -&gt; struct_time</code></li></ul> <p>值得注意的是，在Python3.8之前，时间的模板字符串里不支持非Ascii字符。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#结构化时间参数若不传，则显示当前时间</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %X&quot;</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-24 14:55:36'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token punctuation">,</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-14'</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">&quot;2017-03-16&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> tm_hour<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
                 tm_min<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_wday<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">75</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">&quot;07/24/2017&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;%m/%d/%Y&quot;</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span> tm_hour<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
                 tm_min<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_wday<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">205</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="与标准-a-b-d-h-m-s-y格式的format-string之间的转换"><a href="#与标准-a-b-d-h-m-s-y格式的format-string之间的转换" class="header-anchor">#</a> 与标准<code>%a %b %d %H:%M:%S %Y</code>格式的Format String之间的转换</h5> <ul><li><code>time.asctime(struct_time) → Format %a %b %d %H:%M:%S %Y String</code></li> <li><code>time.ctime(timestamp) → Format %a %b %d %H:%M:%S %Y String</code></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#如果不传参数，直接返回当前时间的格式化串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>asctime<span class="token punctuation">(</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'Fri Jul 14 10:40:00 2017'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>asctime<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Mon Jul 24 15:18:33 2017'</span>

<span class="token comment">#如果不传参数，直接返回当前时间的格式化串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>ctime<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Mon Jul 24 15:19:07 2017'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>ctime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span>
<span class="token string">'Fri Jul 14 10:40:00 2017'</span> 
</code></pre></div><h2 id="calendar模块"><a href="#calendar模块" class="header-anchor">#</a> calendar模块</h2> <p><a href="https://docs.python.org/zh-cn/3/library/calendar.html" target="_blank" rel="noopener noreferrer"><code>calendar</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>模块提供了日历相关的函数，和格式化输出日历。</p> <p>常量</p> <ul><li><code>.MONDAY</code> = 0</li> <li><code>.TUESDAY</code> = 1</li> <li><code>.WEDNESDAY</code>  = 2</li> <li><code>.THURSDAY</code>  = 3</li> <li><code>.FRIDAY</code>  = 4</li> <li><code>SATURDAY</code>  = 5</li> <li><code>.SUNDAY</code> = 6</li></ul> <p>常用函数</p> <ul><li><code>.isleap</code>(<em>year</em>)    是否是闰年</li> <li><code>.weekday</code>(<em>year</em>, <em>month</em>, <em>day</em>)    是星期几（星期一是0依次）</li> <li><code>.weekheader</code>(<em>n</em>)    得到星期几的缩写头，n是字符宽度</li> <li><code>.monthrange</code>(<em>year</em>, <em>month</em>)    得到一个月第一天是星期几和这个月的天数</li> <li><code>.timegm</code>(struct_time)    与<code>time.gmtime()</code>相反效果</li></ul> <p>常用类</p> <ul><li><code>.TextCalendar</code>(<em>firstweekday=0</em>)    简单文本日历</li> <li><code>.HTMLCalendar</code>(<em>firstweekday=0</em>)    超文本日历</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> calendar

<span class="token comment"># 如果需要星期日在第一位 需要设置firstweekday=6或者SUNDAY</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>calendar<span class="token punctuation">.</span>TextCalendar<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>formatmonth<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     April <span class="token number">2020</span>
Su Mo Tu We Th Fr Sa
          <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>
 <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span>
<span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span>
<span class="token number">19</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span>
<span class="token number">26</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span>

<span class="token comment">#本地化  前缀Locale-</span>
<span class="token comment">#“ja-JP” 日语</span>
<span class="token comment">#&quot;fr-FR&quot; 法语</span>
<span class="token comment">#“zh-CN” 国语</span>
<span class="token comment">#'en-US' 嘤语</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> frc <span class="token operator">=</span> calendar<span class="token punctuation">.</span>LocaleTextCalendar<span class="token punctuation">(</span>locale<span class="token operator">=</span><span class="token string">&quot;fr-FR&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>frc<span class="token punctuation">.</span>formatmonth<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     avril <span class="token number">2020</span>
lu ma me je ve sa di
       <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">5</span>
 <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span>
<span class="token number">13</span> <span class="token number">14</span> <span class="token number">15</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">18</span> <span class="token number">19</span>
<span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token number">24</span> <span class="token number">25</span> <span class="token number">26</span>
<span class="token number">27</span> <span class="token number">28</span> <span class="token number">29</span> <span class="token number">30</span>
</code></pre></div><p>注意：</p> <ul><li>本质调用<code>locale.setlocale()</code>，使用后会一直生效，且非线程安全。</li> <li>由于等宽字体的限制，不推荐使用非字母的本地语言。</li> <li>非字母的本地语言如果要使用，还需要调整<code>formatmonth</code>的<code>w</code>参数大于2</li> <li>如果出现乱码，可以尝试以下：
<ul><li>重编码（推荐）</li> <li>改连接符为下划线再加字符集，如<code>ja_JP.UTF-8</code><br>
（可能需要捕获第一次setlocale的异常，且python3.8以下可能依然乱码）</li></ul></li></ul> <h2 id="datetime模块"><a href="#datetime模块" class="header-anchor">#</a> datetime模块</h2> <p><a href="https://docs.python.org/zh-cn/3/library/datetime.html" target="_blank" rel="noopener noreferrer"><code>datetime</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>模块提供用于处理日期和时间的类。</p> <p>时间对象分为感知型和简单型，感知型相比简单型多了时区，夏令时等信息。</p> <h3 id="常用类"><a href="#常用类" class="header-anchor">#</a> 常用类</h3> <table><thead><tr><th style="text-align:center;">类名</th> <th style="text-align:center;">功能说明</th></tr></thead> <tbody><tr><td style="text-align:center;">timedelta</td> <td style="text-align:center;">时间间隔类</td></tr> <tr><td style="text-align:center;">tzinfo</td> <td style="text-align:center;">感知型信息抽象类</td></tr> <tr><td style="text-align:center;">timezone</td> <td style="text-align:center;">tzinfo类的子类，时区信息类</td></tr> <tr><td style="text-align:center;">date</td> <td style="text-align:center;">简单型日期类</td></tr> <tr><td style="text-align:center;">time</td> <td style="text-align:center;">时间类</td></tr> <tr><td style="text-align:center;">datetime</td> <td style="text-align:center;">date类的子类，日期时间类</td></tr></tbody></table> <p>实例化timedelta 时间间隔类</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> datetime
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> jp_offset <span class="token operator">=</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span>
</code></pre></div><p>实例化timezone 时区信息类</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> JST <span class="token operator">=</span> datetime<span class="token punctuation">.</span>timezone<span class="token punctuation">(</span>jp_offset<span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'Tokyo'</span><span class="token punctuation">)</span>
</code></pre></div><p>夏时制不深入讨论，需要实现抽象基类tzinfo上的<code>.dst()</code>方法，timezone类并未将其实现。</p> <h3 id="date类"><a href="#date类" class="header-anchor">#</a> date类</h3> <p>代表一个理想化历法中的日期（年、月和日），即当今的格列高利历向前后两个方向无限延伸</p> <p>它是一个不可变类型（hashable）</p> <h4 id="实例化生成"><a href="#实例化生成" class="header-anchor">#</a> 实例化生成</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> datetime
a <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="静态方法生成"><a href="#静态方法生成" class="header-anchor">#</a> 静态方法生成</h4> <ul><li><code>datetime.date.today</code>()    返回本地日期date对象</li> <li><code>date.fromisoformat</code>(<em>date_string</em>)    格式化字符串→本地日期date对象，只支持<code>YYYY-MM-DD</code></li> <li><code>date.fromtimestamp</code>(<em>timestamp</em>)    时间戳→本地日期date对象</li></ul> <h4 id="对象属性和方法"><a href="#对象属性和方法" class="header-anchor">#</a> 对象属性和方法</h4> <ul><li><code>.year</code>, <code>.month</code>, <code>.day</code>    数据描述符（只读）</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b
datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>year
<span class="token number">2017</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>month
<span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>day
<span class="token number">22</span> 
</code></pre></div><ul><li><code>.replace()</code>    替换数据描述符的属性值</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>day<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">)</span>
datetime<span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>.timetuple()</code>    转struct_time元组，补0</li> <li><code>.weekday()</code>    星期几    星期一为0依次</li> <li><code>.isoweekday()</code>    星期几    没有0，星期一为1依次</li> <li><code>.isocalendar()</code>   返回元组<code>(年, 周，星期)</code>  星期规则同<code>.isoweekday()</code></li></ul> <h5 id="比较和做差"><a href="#比较和做差" class="header-anchor">#</a> 比较和做差</h5> <p>由于实现了诸多魔术方法，两个date对象之间可以比较和做差</p> <p>做差将返回datetime.timedelta对象</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b <span class="token operator">&lt;</span> a
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b <span class="token operator">-</span> a
datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>b <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">.</span>days
<span class="token number">7</span>
</code></pre></div><h5 id="格式化输出"><a href="#格式化输出" class="header-anchor">#</a> 格式化输出</h5> <ul><li><p><code>.strftime(模板字符串)</code>    格式化方法</p></li> <li><p><code>.isoformat()</code>    返回符合ISO 8601标准 (<code>YYYY-MM-DD</code>) 的日期字符串</p></li> <li><p>魔术方法<code>__str__()</code>和<code>.__format__()</code>    可以使用格式化的一切方法。</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>__format__<span class="token punctuation">(</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span>
<span class="token string">'2017-03-22'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>isoformat<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'2017-03-22'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%y'</span><span class="token punctuation">)</span>
<span class="token string">'17'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">format</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token string">'%D'</span><span class="token punctuation">)</span>
<span class="token string">'03/22/17'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token string">'2017-03-22'</span>
</code></pre></div><h3 id="time类"><a href="#time类" class="header-anchor">#</a> time类</h3> <p>一个 time对象代表某日的（本地）时间，它独立于任何特定日期，并可通过 tzinfo对象来调整。</p> <h4 id="实例化生成-2"><a href="#实例化生成-2" class="header-anchor">#</a> 实例化生成</h4> <p><code>datetime.time</code>(<em>hour=0</em>, <em>minute=0</em>, <em>second=0</em>, <em>microsecond=0</em>, <em>tzinfo=None</em>)</p> <h4 id="静态方法生成-2"><a href="#静态方法生成-2" class="header-anchor">#</a> 静态方法生成</h4> <p><code>.fromisoformat</code>(<em>time_string</em>)    .isoformat的逆操作</p> <h4 id="对象属性和方法-2"><a href="#对象属性和方法-2" class="header-anchor">#</a> 对象属性和方法</h4> <p>和date对象一样，实例化时的参数将成为实例对象的数据描述符（只读）</p> <p><code>.replace()</code>    替换数据描述符的属性值</p> <h5 id="比较和做差运算"><a href="#比较和做差运算" class="header-anchor">#</a> 比较和做差运算</h5> <p>time对象不能做差，比较的时候要求tzinfo属性一致。</p> <h5 id="格式化输出-2"><a href="#格式化输出-2" class="header-anchor">#</a> 格式化输出</h5> <ul><li><p><code>.strftime(模板字符串)</code>    格式化方法</p></li> <li><p><code>.isoformat</code>(<em>timespec='auto'</em>)    返回符合ISO 8601标准 (<code>HH:MM:SS.ffffff</code>) 的时间字符串</p> <p>默认的<code>auto</code>会在<code>.ffffff</code>为<code>.000000</code>的时候不显示，即整秒时为<code>HH:MM:SS</code></p> <p>可设置的其他值：</p> <ul><li><code>'hours'</code>: 以两个数码的 <code>HH</code> 格式</li> <li><code>'minutes'</code>: 以 <code>HH:MM</code> 格式</li> <li><code>'seconds'</code>: 以 <code>HH:MM:SS</code> 格式</li> <li><code>'milliseconds'</code>: 包含完整时间，但将秒值截断至微秒。 格式为 <code>HH:MM:SS.sss</code></li> <li><code>'microseconds'</code>: 以 <code>HH:MM:SS.ffffff</code> 格式包含完整时间。</li></ul></li> <li><p>魔术方法<code>__str__()</code>, <code>__format__()</code></p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> offset <span class="token operator">=</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> shanghai_timez <span class="token operator">=</span> datetime<span class="token punctuation">.</span>timezone<span class="token punctuation">(</span>offset<span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'Shanghai'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> bonjour <span class="token operator">=</span> datetime<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span>tzinfo<span class="token operator">=</span>shanghai_timez<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> bonjour<span class="token punctuation">.</span>isoformat<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'07:30:00+08:00'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> bonjour<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%H:%M:%S %Z&quot;</span><span class="token punctuation">)</span>
<span class="token string">'07:30:00 Shanghai'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">format</span><span class="token punctuation">(</span>bonjour<span class="token punctuation">,</span><span class="token string">'%z'</span><span class="token punctuation">)</span>
<span class="token string">'+0800'</span>
</code></pre></div><h3 id="datetime类"><a href="#datetime类" class="header-anchor">#</a> datetime类</h3> <p>datetime类可以看做是date类和time类的合体</p> <p>由于是继承的date类，这里<strong>只介绍派生的方法</strong>。</p> <h4 id="实例化生成-3"><a href="#实例化生成-3" class="header-anchor">#</a> 实例化生成</h4> <p><code>datetime.datetime(year, month, day, hour, minute, second, microsecond,tzinfo)</code></p> <h4 id="静态方法生成-3"><a href="#静态方法生成-3" class="header-anchor">#</a> 静态方法生成</h4> <ul><li><code>datetime.now</code>(<em>tz=None</em>)    当前的datetime对象，可传入时区，默认系统时区</li> <li><code>datetime.utcnow</code>()    生成简单型datetime对象，消除时区信息</li> <li><code>datetime.utcfromtimestamp</code>(<em>timestamp</em>)    由<em>timestamp</em>生成datetime对象，消除时区信息</li> <li><code>datetime.combine</code>(<em>date</em>, <em>time</em>[, <em>tzinfo</em>])    由date对象和time对象生成</li> <li><code>datetime.strptime</code>(<em>date_string</em>, <em>format</em>)    由date_string生成datetime对象</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2017-3-22 15:25'</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%M'</span><span class="token punctuation">)</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="对象属性和方法-3"><a href="#对象属性和方法-3" class="header-anchor">#</a> 对象属性和方法</h4> <ul><li><code>.date()</code>    拆解出date对象</li> <li><code>.time()</code>    拆解出time对象</li> <li><code>.timestamp()</code>    6位浮点的时间戳</li> <li><code>.utctimetuple()</code>    返回消除时区信息的struct_time</li></ul> <h5 id="格式化输出-3"><a href="#格式化输出-3" class="header-anchor">#</a> 格式化输出</h5> <p><code>.isoformat</code>(<em>sep='T', timespec='auto'</em>)    同date类的同名方法，sep是日期和时间之间的分隔符。</p> <h4 id="时区转换"><a href="#时区转换" class="header-anchor">#</a> 时区转换</h4> <ul><li><code>.astimezone(tz)</code>    偏移时间</li> <li><code>.replace(tzinfo=</code>    转换时区</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 时间戳转utc</span>
d <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>utcfromtimestamp<span class="token punctuation">(</span><span class="token number">1454060831</span><span class="token punctuation">)</span>
<span class="token comment"># 2016-01-29 09:47:11</span>

<span class="token comment"># 转上海时间（上面已经定义了shanghai_timez）</span>
d1 <span class="token operator">=</span> d<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>tzinfo<span class="token operator">=</span>datetime<span class="token punctuation">.</span>timezone<span class="token punctuation">.</span>utc<span class="token punctuation">)</span><span class="token punctuation">.</span>astimezone<span class="token punctuation">(</span>shanghai_timez<span class="token punctuation">)</span>
<span class="token comment"># 2016-01-29 17:47:11+08:00</span>
</code></pre></div><p>也可以简单点：</p> <div class="language-python extra-class"><pre class="language-python"><code>d1 <span class="token operator">=</span> d <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/markdown-note/py/22-正则有关模块.html" class="prev">正则有关模块</a></span> <span class="next"><a href="/markdown-note/py/24-数学有关模块.html">数学有关模块</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/markdown-note/assets/js/app.a730857b.js" defer></script><script src="/markdown-note/assets/js/6.4d707832.js" defer></script><script src="/markdown-note/assets/js/1.19267a43.js" defer></script><script src="/markdown-note/assets/js/10.450906df.js" defer></script>
  </body>
</html>
